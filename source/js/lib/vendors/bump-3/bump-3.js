define("mp/modules/policies",[],function(){var e={iplayer:{theme:{colour:"#f54897"},guidanceCleared:!1,siteID:"iPlayer",defaultUiClass:"iplayer",mediasetClass:"pc"},news:{theme:{colour:"#ff0000"},guidanceCleared:!0,siteID:"News",defaultUiClass:"news",mediasetClass:"journalism",preferHtmlOnMobile:!0},sport:{theme:{colour:"#eed71c",foreColour:"#000000",alternateColour:"#0087ff",alternateForeColour:"#ffffff"},disable3GWarning:!0,siteID:"Sport",defaultUiClass:"sport",guidanceCleared:!0,mediasetClass:"journalism"}};return e}),define("mp/classes/errors/error",[],function(){function e(e,t){var n="en";if(e){n=e.locale();if(e.overrideError)var r=e.overrideError[t]}return window.embeddedMedia.language?window.embeddedMedia.language.t(t,n,r)||"Unknown Error":""}function t(t,n){return this._c=t,this._d=e(n,t+""),this}return t.prototype={code:function(){return this._c},description:function(){return this._d},detail:function(){return""},severity:function(){return"critical"},responsibility:function(){return"client"}},t}),define("mp/classes/settings",["jquery-1.9","mp/modules/policies","mp/classes/errors/error"],function(e,t,n){var r={container:{},playlist:"",playlistXML:"",startTime:0,volume:.7,muted:!1,overrideHoldingImage:"",product:"iplayer",autoplay:!1,responsive:!1,superResponsive:!1,today:new Date,guidance:{},mediator:{},mediaProfile:"",includeAppClickHandler:!0,preferHtmlOnMobile:!1,overrideSortOrder:null,plugins:{player:{width:"640px",height:"360px",poster:""},contextMenu:{},debugWindow:{},toLoad:[]},waitOnPluginLoad:!1,theme:{colour:"#f54897",foreColour:"#ffffff"},configVars:{},quality:"medium",uiClass:"",ui:{locale:{lang:"en",path:"http://www.bbc.co.uk/emp/translations/smp/{lang}.xml"}},customIStatsURL:"",customDAXURL:"",enableDaxReporting:!0,customRdotBaseURL:"http://r.bbci.co.uk/e",enableRdotReporting:!0,enableSonarReporting:!0,statsObject:{},embedPageURL:"",embedPageQuery:"",forceGuidance:"",aaampGuidance:"",guidanceCleared:!1,custom3GWarning:"",disable3GWarning:!1,appName:"",appType:"",counterName:"smp.player.page",siteID:"",playerType:"",daxSessionID:"",blacklistedPlugins:[],requestWMP:!1,suppressType:[],suppressItemKind:[],sessionID:"",overrideError:{},overrideErrorLink:{},pageType:"",parentSection:0,edition:"",uniqueID:0,webcastData:{},enableBitrateSwitching:!0},i=function(t,n,i){var s=typeof i=="object";s?(typeof r[n]=="object"&&e.extend(!0,t[n],i),n=="playlistObject"&&(t[n]=i)):t[n]=i},s=function(e){return this.init(e)};return s.prototype={set:function(){var t=this;if(arguments.length===2){var n=arguments[0],r=arguments[1];i(t,n,r)}else typeof arguments[0]=="object"&&e.each(arguments[0],function(e,n){i(t,e,n)});document.cookie.match(/bumpForceAlternate=true/)&&(t.playerType="alternate");for(var n in t.webcastData)if(t.webcastData.hasOwnProperty(n)){var s=t.webcastData[n];Object.prototype.toString.call(s)==="[object Date]"&&(t.webcastData[n]=s.getTime()/1e3)}return t},init:function(n){var r=this;r.reset(),typeof n!="object"&&(n={});var i=n.product;i||(i=r.product);var s=t[i],o=e.extend(!0,{},s);e.each(o,function(e,t){r[e]=t});var u=t[i];return u&&(r.theme=e.extend(!0,u.theme,r.theme),r.theme&&(r.theme.colour&&(r.ui.colour=r.theme.colour),r.theme.foreColour&&(r.ui.foreColour=r.theme.foreColour),r.theme.alternateColour&&(r.ui.alternateColour=r.theme.alternateColour),r.theme.alternateForeColour&&(r.ui.alternateForeColour=r.theme.alternateForeColour)),r.overrideSortOrder=u.overrideSortOrder),r.embedPageURL===""&&(r.embedPageURL=location.href),r.embedPageQuery===""&&(r.embedPageQuery=location.search&&location.search.length?location.search.substring(1):""),r.ui.colour||(r.ui.colour=r.theme.colour?r.theme.colour:"#000000"),r.ui.foreColour||(r.ui.foreColour=r.theme.foreColour?r.theme.foreColour:"#ffffff"),r.ui.alternateColour||(r.ui.alternateColour=r.theme.alternateColour?r.theme.alternateColour:r.ui.colour),r.ui.alternateForeColour||(r.ui.alternateForeColour=r.theme.alternateForeColour?r.theme.alternateForeColour:r.ui.foreColour),r.set(n)},reset:function(){var t=this,n=e.extend(!0,{},r);return e.each(n,function(e,n){t[e]=n}),t},validate:function(){var e=this,n=!0;if(e.product===""||!t[e.product])n=!1,e.dispatch(6007);if(!e.container||e.container.get(0)===undefined||e.container.length===0)throw n=!1,"BUMP error "+String(6009)+" : DOM element not found";return n},dispatch:function(t){var r=this;if(r.container&&typeof r.container.trigger=="function"){var i=e.Event("error");i.errorData=new n(t,r),r.container.trigger(i)}},locale:function(){return this.ui.locale.lang}},s}),define("mp/classes/language",[],function(){function i(e){if(t[e])while(t[e].length>0)t[e].pop()()}var e={en:{threeG:"This is a free BBC service. However, your operator may charge you for the amount of data you use. If you are unsure how much data costs on your tariff, please contact your network operator.",threeGcontinue:"Continue",pgHeader:"Parental Guidance Lock",pgAgeConfirmation:"I am aged 16 or over",pgClose:"Close pop up",pgContinue:"Continue",pgPasswordValidationError:"Please confirm your age before continuing",pgAriaAgeConfirmCheckBox:"Age confirmation check box. Checked.",pgAriaAgeConfirmCheckBoxUnchecked:"Age confirmation check box. Check to confirm you are sixteen or over.",pgTurnOnParentalGuidance:"Turn on the Parental Guidance Lock?",pgInfoPlusDownload:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.<p>To set up your PIN choose â€˜Turn Onâ€™. To continue without Parental Guidance choose â€˜Downloadâ€™.</p>",pgInfoPlusPlay:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.<p>To set up your PIN choose â€˜Turn Onâ€™. To continue without Parental Guidance choose â€˜Playâ€™.</p>",pgInfo:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.",pgTurnOn:"Turn On",toolTipPlay:"Play",pgEnterPIN:"Please enter a four-digit PIN",pgActivateInfo:"You will need your PIN to play Guidance-labelled content",pgPINValidationError:"Your PIN must be four digits",pgAriaPINEntryDescription:"PIN entry text field",pgAriaPINPrompt:"Please enter a valid four-digit PIN",pgPasswordPrompt:"Please enter your password",pgGuidanceUpdateInfo:"The BBC parental guidance system has been updated. To view content you will now need to set up a PIN",pgForgottenPassword:"Forgotten your Password?",pgPasswordError:"Incorrect password. Please try again",pgEnterPINPrompt:"Please enter your four-digit PIN to continue",pgManageYourPIN:"Manage your PIN",pgUnlock:"Unlock",pgIncorrectPIN:"Incorrect PIN. Please try again",pgDownload:"Download",pgActivate:"Activate",6e3:"Unable to embed player",6001:"Playlist load error",6002:"Method unsupported",6003:"Your device is not currently supported",6004:"Player failed to initialise",6007:"Product Name Does Not Exist",6010:"You need to install Flash Player to play this content.",downloadFlash:"Download Flash Player now",embedTitle:"Embed This Media",embedDescription:"Copy the code below to share this content on your own site. Press escape to close",embedTerms:"Terms and conditions",embedClose:"Close",aaampTitle:"BBC Media Player",aaampMsg:"To play BBC Programmes you need to install the BBC Media Player application from your app store",aaampInstall:"Install",aaampCancel:"cancel",aaampPlay:"click to play",jumpMediaPlayer:"Jump media player",mediaPlayerHelp:"Media player help",outOfMediaPlayer:"Out of media player. Press enter to return or tab to continue."}},t={},n={},r={},s=5e3,o={"en-GB":"en","en-gb":"en","cy-GB":"cy","cy-gb":"cy","gd-GB":"gd","gd-gb":"gd","ga-GB":"ga","ga-gb":"ga"},u={add:function(t,n){clearTimeout(r[t]),e[t]=n,i(t)},load:function(u,a){o[u]&&(u=o[u]);if(u&&/^[\-a-zA-Z]{1,8}$/.test(u)&&!e[u]){t[u]||(t[u]=[]),t[u].push(a);if(!n[u]){n[u]=!0;var f=document.createElement("script");f.type="text/javascript",f.charset="utf-8",f.async=!0,f.src="http://emp.bbci.co.uk/emp/assets/langs/language."+u+".js",document.getElementsByTagName("head")[0].appendChild(f),clearTimeout(r[u]),r[u]=setTimeout(function(){i(u)},s)}}else a()},t:function(t,n,r){o[n]&&(n=o[n]);if(r){if(typeof r=="string")return r;if(r[n])return r[n]}return e[n]&&e[n][t]?e[n][t]:e.en[t]}};return u}),define("mp/modules/device",[],function(){function e(){var e=window.embeddedMedia.demi,t=!!document.cookie.match(/bbcBumpMobile=true/),n=window.navigator.userAgent.toLowerCase(),r=function(){var e=/mac/.test(n),t={win:/windows/.test(n)&&!/windows phone/.test(n),mac:e&&!/like mac os x/.test(n),linux:/linux/.test(n),unix:/x11/.test(n),ios:/like mac os x/.test(n),android:/android/.test(n),blackberry:/blackberry/.test(n)||/playbook/.test(n),playbook:/playbook/.test(n),winphone:/windows phone/.test(n),kindleSilk:/silk/.test(n),macsafari:/safari/.test(n)&&e&&!/chrome/.test(n)};for(var r in t)t[r]&&(t.name=r);if(t.win)/nt 5\./.test(n)?t.win="xp":/nt 6\.0/.test(n)?t.win="vista":/nt 6\.1/.test(n)?t.win="7":/nt 6\.2/.test(n)&&(t.win="8");else if(t.mac)/os x 10.0/.test(n)?t.mac="cheetah":/os x 10.1/.test(n)?t.mac="puma":/os x 10.2/.test(n)?t.mac="jaguar":/os x 10.3/.test(n)?t.mac="panther":/os x 10.4/.test(n)?t.mac="tiger":/os x 10.5/.test(n)?t.mac="leopard":/os x 10.6/.test(n)?t.mac="snow leopard":/os x 10.7/.test(n)?t.mac="lion":/os x 10.8/.test(n)&&(t.mac="mountain lion");else if(t.ios)/os 3/.test(n)?t.ios="3":/os 4/.test(n)?t.ios="4":/os 5/.test(n)?t.ios="5":/os 6/.test(n)&&(t.ios="6");else if(t.android){var i=n.match(/android[^\d]*(([\d|\.]+\d))/);t.androidVersion=parseFloat(RegExp.$1)}else t.winphone&&(/windows phone 8.0/.test(n)?t.winphone="windows phone 8.0":/windows phone 8.1/.test(n)&&(t.winphone="windows phone 8.1"));return t}(),i={connection:{mobile:t||e.isMobileNetwork},isTabletDevice:e.isTabletDevice,isMobileDevice:e.isMobileDevice,isMobileOrTablet:e.isMobileDevice||e.isTabletDevice||r.ios||r.android||r.blackberry||r.playbook||r.winphone||r.kindleSilk,hasTouchScreen:"ontouchstart"in window||typeof window.Touch!="undefined"||e.hasTouchScreen||window.navigator.msMaxTouchPoints>0||window.navigator.maxTouchPoints>0,hasStylus:e.hasStylus,os:r,hasHlsVodSupport:!1,supportsFlash:!0},s=["ios","macsafari"];for(var o=0;o<s.length;o++)s[o]==i.os.name&&(i.hasHlsVodSupport=!0);i.allowHlsVod=function(){i.hasHlsVodSupport||i.os.androidVersion>=4.1&&(i.hasHlsVodSupport=!0)},i.waitForLoad=i.os.winphone||document.documentMode===8||document.documentMode===9;if(i.isMobileDevice)i.supportsFlash=!1;else{var u=["ios","android","winphone","kindleSilk","playbook"];for(o=0;o<u.length;o++)u[o]==i.os.name&&(i.supportsFlash=!1)}return i}return{get:e}}),define("mp/modules/html5",["jquery-1.9"],function(e){var t={},n=function(n,r){var i=e("<"+n+" />").get(0);t[n]=!1;if(!i||typeof i.canPlayType!="function")return{};var s={};for(var o=0;o<r.length;o++){var u=r[o].name,a=r[o].codecs;s[u]=!1;for(var f=0;f<a.length;f++){var l=a[f],c=i.canPlayType(l);c.replace("no","").length>0&&(t[n]=!0,s[u]=!0)}}return s},r={video:function(){var e=[{name:"mp4",codecs:['video/mp4; codecs="mp4v.20.8"']},{name:"h264",codecs:['video/mp4; codecs="avc1.42E01E"','video/mp4; codecs="avc1.42E01E, mp4a.40.2"']},{name:"ogg",codecs:['video/ogg; codecs="theora"']},{name:"webm",codecs:['video/webm; codecs="vp8, vorbis"']},{name:"hls",codecs:["application/x-mpegURL"]}];return n("video",e)}(),audio:function(){var e=[{name:"aac",codecs:["audio/x-m4a;","audio/aac;"]},{name:"aac/lc",codecs:['audio/mp4; codecs="mp4a.40.2"']},{name:"aac/he",codecs:['audio/mp4; codecs="mp4a.40.5"']},{name:"m4a",codecs:["audio/m4a;"]},{name:"mp4",codecs:["audio/mp4;"]},{name:"ogg",codecs:['audio/ogg; codecs="vorbis"']},{name:"mp3",codecs:["audio/mpeg;"]},{name:"mpeg",codecs:["audio/mpeg;"]},{name:"wav",codecs:['audio/wav; codecs="1"']}];return n("audio",e)}(),media:function(){return t}()};return r}),define("mp/classes/settingsbuilder",["jquery-1.9","mp/modules/device"],function(e,t){var n={mediasets:{pc:{flash:{desktop:"pc",cellular:"android-phone-tablet-rtmp-3g",mobile:"android-phone-rtmp-high",tablet:"android-tablet-rtmp"},html5:{desktop:"apple-ipad-hls",cellular:"apple-iphone4-ipad-hls-3g",mobile:"apple-iphone4-hls",tablet:"apple-ipad-hls",iosfourtwotwo:"apple-iphone2-hls",iphonetwo:"apple-iphone2-hls"}},journalism:{flash:{desktop:"journalism-pc",cellular:"journalism-flash-3g",mobile:"journalism-flash-mobile",tablet:"journalism-flash-tablet"},html5:{desktop:"journalism-http-tablet",cellular:"journalism-http-3g",mobile:"journalism-http-mobile",tablet:"journalism-http-tablet"}}},mediaSet:function(e,n){if(e.mediator.overrideMediaSet)return e.mediator.overrideMediaSet;var r=this.mediasets[e.mediaProfile];e.mediasets=r?r:this.mediasets[e.mediasetClass];if(e.mediasets){var i=t.get(),s=e.mediasets[n||"flash"];if(i.isMobileOrTablet)return i.connection.mobile?s.cellular:i.isTabletDevice?s.tablet:s.mobile;return s.desktop}return""},mediatorHref:function(t,n,r){var i=location.protocol=="https:"?"https":"http",s={href:r,protocol:i,host:"open.live.bbc.co.uk",mediaset:n,backend:""};e.extend(!0,s,t.mediator);var o=s.href;return e.each(s,function(e,t){switch(e){case"href":break;case"protocol":o=o.replace("{"+e+"}",t==="https"?"https":"http");break;case"backend":o+=t.length?"?backend="+t:"";break;default:o=o.replace("{"+e+"}",t)}}),o}};return n}),define("mp/classes/embedPopup",["jquery-1.9"],function(e){function t(){return this}return t.prototype={show:function(t){var n=this;n._embedBox&&n.close(!0);var r=t._settings;window.embeddedMedia.opened();var i={width:"100%",height:"100%",margin:"0px",position:"fixed","z-index":1e3,top:"0px",left:"0px","background-color":"#000000",zoom:1,filter:"alpha(opacity=50)",opacity:.5};n._background=e('<div id="embedBackground"></div>').css(i).appendTo(document.body);var s={display:"-webkit-box","-webkit-box-orient":"horizontal","-webkit-box-pack":"center","-webkit-box-align":"center",display:"-moz-box","-moz-box-orient":"horizontal","-moz-box-pack":"center","-moz-box-align":"center",display:"box","box-orient":"horizontal","box-pack":"center","box-align":"center",position:"fixed",width:"400px",height:"160px",bottom:"0",left:"0",top:"0",right:"0",margin:"auto","vertical-align":"middle","text-align":"center",color:"white","font-size":"22px","z-index":1001,"background-color":"#262626","font-family":"Arial, sans-serif"},o={position:"absolute",left:"0px","margin-left":"10%","margin-top":"6%"};n._embedBox=e('<div id="embedBox" role="alertdialog" aria-labelledby="embedMediaTitle" aria-describedby="embedMediaDescription"></div>').css(s).appendTo(document.body);var u=r.locale(),a=window.embeddedMedia.language,f=a.t("embedTitle",u),l=a.t("embedDescription",u),c=a.t("embedTerms",u),h=a.t("embedClose",u),p=e('<span id="embedMediaTitle">'+f+'</span><span id="embedMediaDescription" style="display:none" aria-hidden="true">'+l+"</span>");p.css(o).appendTo(n._embedBox);var d={position:"absolute",width:"80%",height:"30px",top:"50%",left:0,"margin-top":"-15px","margin-left":"10%","font-size":"14px",color:"#848484"},v=encodeURIComponent(t._settings.product),m=encodeURIComponent(t.playlist.title),g=encodeURIComponent(t.playlist.url),y="http://www.bbc.co.uk/emp/embed/smpEmbed.html?playlist="+g+"&title="+m+"&product="+v;u!="en"&&(y+="&lang="+u);var b='<iframe width="400" height="500" frameborder="0" src="'+y+'"></iframe>',w=e('<input type="text" id="embedText" />').css(d).appendTo(n._embedBox);e("#embedText")[0].value=b;var E={position:"absolute",bottom:0,left:0,"margin-bottom":"6%","margin-left":"10%","font-size":"0.6em",color:"#ffffff","text-decoration":"none"},S=e('<a target="_blank" href="http://www.bbc.co.uk/terms/additional_emp.shtml">'+c+"</a> ");S.css(E).appendTo(n._embedBox),w.click(function(){e(this).select()}),setTimeout(function(){w.focus()},100);var x={position:"absolute",right:"0px","font-size":"0.8em",color:"0xffffff",top:"0px","margin-top":"10px","margin-right":"10px",color:"#ffffff","text-decoration":"none",cursor:"pointer"},T=e('<a aria-label="'+h+'" href="#">x</a> ');T.css(x).appendTo(n._embedBox),T.click(function(e){e.preventDefault&&e.preventDefault(),e.returnValue=!1,n.close()}),n._tabList=[w,S,T],n._currentTab=0;var N=function(e){e=e||window.event;var t=e.keyCode||e.which;t===27&&n.close();if(t!=9&&t!=13)return;e.preventDefault&&e.preventDefault(),e.returnValue=!1;if(t==9){var r=n._tabList.length-1;e.shiftKey?n._currentTab=n._currentTab===0?r:n._currentTab-1:n._currentTab=n._currentTab===r?0:n._currentTab+1,setTimeout(function(){n._tabList[n._currentTab].focus()},200)}else this.click()};for(var C=0;C<n._tabList.length;C++)n._tabList[C].keydown(N)},close:function(e){var t=this;e||window.embeddedMedia.closed(),t._background&&(t._background.remove(),t._background=undefined),t._embedBox&&(t._embedBox.remove(),t._embedBox=undefined)}},t}),define("mp/classes/players/player",[],function(){function e(){return this.includePoster=!0,this._volume=1,this}return e.prototype={name:function(){return this._name},setPoster:function(e,t){t.poster(e)},destroy:function(){this._container&&this._container.empty()},call:function(){},play:function(){this.call("play")},stop:function(){this.call("stop")},pause:function(){this.call("pause")},muted:function(e){return typeof e!="undefined"&&this.call("muted",e),this._muted},volume:function(e){return typeof e=="number"&&this.call("volume",e),this._volume},duration:function(){return this._duration},ended:function(){return this._ended},seeking:function(){return this._seeking},paused:function(){return this._paused},kind:function(){return this._kind},currentTime:function(e){return typeof e=="number"&&this.call("currentTime",e),this._currentTime},setData:function(){},webcastData:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];Object.prototype.toString.call(n)==="[object Date]"&&(e[t]=n.getTime()/1e3)}},loadPlaylist:function(){}},e}),define("mp/classes/daxreporting",[],function(){function a(){var i=[t+s,"ns_type=hidden","app_name="+n,"app_type="+r,"mediaplayer_name=BUMPV3","mediaplayer_type=BUMPV3","mediaplayer_version="+window.embeddedMedia.version,o];e.mediaplayer_name&&i.splice(4,2);for(var u in e)e.hasOwnProperty(u)&&i.push(encodeURIComponent(u)+"="+encodeURIComponent(e[u]));return i.join("&")}function f(){if(i){var e=a(),t=new Image;return t.src=e,e}}var e={},t="//sa.bbc.co.uk/bbc/bbc/s?",n="BUMPV3",r="BUMPV3",i=!0,s="name=unknown",o="dax_session_id=unknown",u={32:"spacebar",13:"enter",27:"esc"};return{init:function(u,a,f,l,c,h){e={},i=u,c&&(n=c),h&&(r=h),s="name="+encodeURIComponent(a),o="dax_session_id="+encodeURIComponent(f),t=l?l:t},trackAction:function(t,n,r){e={},!isNaN(n)&&u[n]!==undefined&&(e.key=u[n],n="key_press"),e.control_id=t,e.action_type=n;for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i]);return f()}}}),define("mp/classes/chromecastprovider",["mp/classes/daxreporting"],function(e){var t=function(e){this.currentSession=null,this.mediaSession=null,this.smp=e,this.isCasting=!1,this.isAvailable=!1,this.ccId="",this.cancelRequest=!1,this.interrupted=!1;var t=document.createElement("script");t.type="text/javascript",t.charset="utf-8",t.async=!0,t.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js",document.getElementsByTagName("head")[0].appendChild(t),n.call(this)},n=function(){var t=function(){this.dispatchToPlayer("onCastInitialised")},r=function(e){this.dispatchToPlayer("ccInfo",{state:"ERROR",detail:e})},i=function(e){this.currentSession=e,this.isAvailable=!0,this.dispatchToPlayer("ccInfo",{detail:"Receivers available"})},s=function(t){e.trackAction("ccAvailable",t),t=="available"?(this.isAvailable=!0,this.dispatchToPlayer("ccInfo",{detail:"Receivers available"})):(this.isAvailable=!1,this.isCasting=!1,this.dispatchToPlayer("ccInfo",{detail:"Receivers not available"}))};if(!chrome.cast||!chrome.cast.isAvailable)setTimeout(n.bind(this),1e3);else{var o=new chrome.cast.SessionRequest("5E81F6DB"),u=new chrome.cast.ApiConfig(o,i.bind(this),s.bind(this));chrome.cast.initialize(u,t.bind(this),r.bind(this))}};return t.prototype={requestCast:function(e){if(this.currentSession)this.launchProg(e);else{var t=function(t){this.currentSession=t,this.launchProg(e)},n=function(e){this.dispatchToPlayer("ccInfo",{state:"ERROR",detail:e})};chrome.cast.requestSession(t.bind(this),n.bind(this))}},launchProg:function(e){this.currentSession.addUpdateListener(this.onSessionUpdate.bind(this)),this.ccId=this.currentSession.receiver.friendlyName,this.dispatchToPlayer("ccInfo",{state:"CONNECTING",id:this.ccId});var t=this.smp.playlist.holdingImageURL,n=this.smp.playlist.links;for(var r=0;r<n.length;r++)n[r].rel==="holdingrecipe"&&(t=n[r].href);this.loadMedia(e,this.smp.playlist.title,this.smp.playlist.summary,t)},loadMedia:function(e,t,n,r){if(this.currentSession==null)this.dispatchToPlayer("ccInfo",{state:"ERROR",detail:"There is no active media playback"});else{var i=function(e){this.interrupted=!1,this.mediaSession=e,this.mediaSession.addUpdateListener(this.onMediaStatusUpdate.bind(this))},s=function(e){this.dispatchToPlayer("ccInfo",{state:"ERROR",detail:e})},o=new chrome.cast.media.GenericMediaMetadata,u=new chrome.cast.Image(r.replace("{recipe}","1280x720"));u.height=720,u.width=1280,o.images=[u],o.title=t;var a=r.split("/"),f=a[a.length-1].split(".")[0],l="",c=this.smp.playlist.items;for(var h=0;h<c.length;h++)if(c[h].kind==="programme"){l=c[h].group;break}var p=new chrome.cast.media.MediaInfo(e,"video/mp4");p.metadata=o,p.customData={base_image_url:"http://ichef.bbci.co.uk/programmeimages/"+f+"/",secondary_title:n,original_pid:l,sender:"smp",image_identifier:f};var d=new chrome.cast.media.LoadRequest(p);d.currentTime=this.smp.currentTime(),d.currentTime>=this.smp.duration()-5&&(d.currentTime=0),this.currentSession.loadMedia(d,i.bind(this),s.bind(this))}},stopCast:function(){this.cancelRequest=!0;var e=function(){this.isCasting=!1,this.dispatchToPlayer("ccInfo",{state:"STOPPED"})},t=function(e){this.isCasting=!1,this.dispatchToPlayer("ccInfo",{state:"ERROR",detail:e})};this.currentSession.stop(e.bind(this),t.bind(this))},stopMedia:function(){var e=function(){this.isCasting=!1,this.dispatchToPlayer("ccInfo",{state:"STOPPED"})},t=function(e){this.dispatchToPlayer("ccInfo",{state:"ERROR",detail:e})};this.mediaSession.stop(new chrome.cast.media.StopRequest,e.bind(this),t.bind(this))},interrupt:function(){this.isCasting=!1,this.interrupted=!0,this.dispatchToPlayer("ccInfo",{state:"INTERRUPT"}),this.stopMedia()},pause:function(){if(this.mediaSession==null)this.dispatchToPlayer("ccInfo",{state:"ERROR",detail:"There is no active media playback"});else{var e=function(){},t=function(){this.dispatchToPlayer("ccInfo",{state:"ERROR",detail:"Unable to pause"})};this.mediaSession.pause(new chrome.cast.media.PauseRequest,e.bind(this),t.bind(this))}},seekTo:function(e){if(this.mediaSession==null)this.dispatchToPlayer("ccInfo",{state:"ERROR",detail:"There is no active media playback"});else{var t=function(){},n=function(){this.dispatchToPlayer("ccInfo",{state:"ERROR",detail:"Unable to seek"})},r=new chrome.cast.media.SeekRequest;r.currentTime=e,this.mediaSession.seek(r,t.bind(this),n.bind(this))}},play:function(){if(this.mediaSession==null)this.dispatchToPlayer("ccInfo",{state:"ERROR",detail:"There is no active media playback"});else{var e=function(){},t=function(){this.dispatchToPlayer("ccInfo",{state:"ERROR",detail:"Unable to play"})};this.mediaSession.play(new chrome.cast.media.PlayRequest,e.bind(this),t.bind(this))}},setVolume:function(e){if(this.mediaSession==null)this.dispatchToPlayer("ccInfo",{state:"ERROR",detail:"There is no active media playback"});else{var t=function(){},n=function(){this.dispatchToPlayer("ccInfo",{state:"ERROR",detail:"Unable to set volume"})};e===0?this.currentSession.setReceiverMuted(!0,t.bind(this),n.bind(this)):this.currentSession.setReceiverVolumeLevel(e,t.bind(this),n.bind(this))}},subtitlesOn:function(){var e=function(){},t=function(){this.dispatchToPlayer("ccInfo",{state:"ERROR",detail:"Failed to turn subtitles on"})};this.currentSession.sendMessage("urn:x-cast:uk.co.bbc.cast","subtitlesOn",e.bind(this),t.bind(this))},subtitlesOff:function(){var e=function(){},t=function(){this.dispatchToPlayer("ccInfo",{state:"ERROR",detail:"Failed to turn subtitles off"})};this.currentSession.sendMessage("urn:x-cast:uk.co.bbc.cast","subtitlesOff",e.bind(this),t.bind(this))},onMediaStatusUpdate:function(e){e?this.mediaSession&&!this.interrupted&&(this.isCasting=!0,this.dispatchToPlayer("ccInfo",{state:this.mediaSession.playerState,currentTime:this.mediaSession.currentTime,id:this.ccId,subtitlesEnabled:this.mediaSession.customData.subtitlesEnabled,floatVolume:this.currentSession.receiver.volume.level})):this.mediaSession.playerState=="IDLE"&&!this.interrupted&&(this.isCasting=!1,this.stopMedia())},onSessionUpdate:function(e){if(e){if(this.currentSession&&!this.cancelRequest){var t=this.currentSession.receiver.volume.level;this.currentSession.receiver.volume.muted&&(t=0),this.mediaSession?this.dispatchToPlayer("ccInfo",{state:this.mediaSession.playerState,currentTime:this.mediaSession.currentTime,id:this.ccId,subtitlesEnabled:this.mediaSession.customData.subtitlesEnabled,floatVolume:t}):this.dispatchToPlayer("ccInfo",{floatVolume:t})}}else this.stopCast(),this.currentSession=null},dispatchToPlayer:function(t,n){n&&(n.available=this.isAvailable,n.casting=this.isCasting,n.state==="ERROR"&&e.trackAction("ccError","error",{detail:typeof n.detail=="string"?n.detail:n.detail.description})),this.smp.call(t,n),console.log("# CC dispatch to player: ",t,n)}},t}),define("mp/classes/players/flash/smp-flash",["jquery-1.9","swfobject-2","mp/modules/device","mp/classes/settingsbuilder","mp/classes/embedPopup","mp/classes/players/player","mp/classes/chromecastprovider"],function(e,t,n,r,i,s,o){function u(e){return e.getUTCFullYear()+"/"+a(e.getUTCMonth()+1)+"/"+a(e.getUTCDate())+" 00:00:00 UTC"}function a(e){return e<10?"0"+e:e}function f(e){if(!e||!e.getFullYear)e=new Date;var t=e.getFullYear(),n=e.valueOf(),r=new Date(n);r.setMonth(2),r.setDate(31-Math.floor(5*t/4+4)%7),r.setUTCHours(1),r.setUTCMinutes(0),r.setUTCSeconds(0);var i=new Date(n);return i.setMonth(9),i.setDate(31-Math.floor(5*t/4+1)%7),i.setUTCHours(1),i.setUTCMinutes(0),i.setUTCSeconds(0),e>r&&e<i}function l(e,t){return function(){window.embeddedMedia.handle(e,t)}}function c(){var t=window.embeddedMedia;return function(n,r){var s=t.playerInstances[n];if(!s)return;if(n!=s._container.attr("id"))return;if(!s._swf){setTimeout(l(n,r),100);return}var u=e.Event(r.type),a=r.data;a&&a.callType&&(a=a.data);if(typeof a=="object")for(var f in a)f!="type"&&(u[f]=a[f],f=="currentDuration"&&(u.duration=a[f]));else u.eventData=a;switch(r.type){case"ccRequest":this.castProvider.requestCast(r.data.mediatorIdentifer);break;case"ccPlay":this.castProvider.play();break;case"ccPause":this.castProvider.pause();break;case"ccSeek":this.castProvider.seekTo(r.data.seekTime);break;case"ccVolume":this.castProvider.setVolume(r.data.floatVolume);break;case"ccCancel":this.castProvider.stopMedia();break;case"ccInterrupt":this.castProvider.interrupt();break;case"ccSubsOn":this.castProvider.subtitlesOn();break;case"ccSubsOff":this.castProvider.subtitlesOff();break;case"show3G":window.embeddedMedia.warn3G.show(s._settings,s,!0);break;case"initialised":try{s.initialised()}catch(c){setTimeout(l(n,r),100);return}window.chrome&&s._settings.allowCasting&&(this.castProvider=new o(s));break;case"loadedmetadata":s._duration=a.duration;break;case"timeupdate":s._currentTime=a.currentTime,s._duration=u.duration;break;case"seeked":s._seeking=!1;break;case"seeking":s._seeking=!0;break;case"playlistEnded":case"ended":s._playing=!1,s._ended=!0;break;case"volumechange":u.volume=a,s._volume=a,s._muted=a===0,s._settings.set("volume",a);break;case"pause":s._paused=!0;break;case"playlistLoaded":s._seeking=!1,s._paused=!0,s._ended=!1,s._playing=!1,u.url=a.url,s.playlist=a.playlist;break;case"playing":s._playing=!0,s._paused=!1,s._ended=!1,s._kind=u.kind;break;case"guidanceshow":s._settings.guidanceCleared?s.call("updateGuidance",s._settings.guidance):(s._restoreFocus=!0,s._gCalled=!0,s._lockClicked=r.data.lockClicked,t.parentalGuidance.show(r.data,s._settings.ui.colour,s._settings.locale()));break;case"linkRequest":a.type==="managePIN"||a.type==="PGinfo"?window.open("http://www.bbc.co.uk/guidance/help","pg"):a.type=="playlistRedirect"&&window.open(a.url,"_top");break;case"verify":t.parentalGuidance.verify(a,function(e){s.call("verified",e)});break;case"setPIN":t.parentalGuidance.setPIN(a.PIN);break;case"setGuidanceSkipped":t.parentalGuidance.setAgeConfirmation(a.skipped);break;case"guidanceLocked":t.parentalGuidance.setLocked(a.locked,!0);break;case"screenReaderAlert":var h=a;if(typeof h!="string")return!1;var p=e("<div role='alert' style='width: 1px; position: absolute; left: -2500px; overflow: hidden;'><p>"+h+"</p></div>").appendTo(e("body"));p.hide(),p.show(),window.setTimeout(function(){p.remove()},2500);break;case"focusOnFlash":case"focusAfterFlash":case"focusBeforeFlash":s[r.type]();break;case"embed":if(s.playlist){s._restoreFocus=!0;var d=new i;d.show(s)}}s._container.trigger(u)}}function h(){return this.type="flash",this._name="smp-flash",this._volume=0,this._currentTime=0,this._duration=0,this._kind="",this._pluginsToLoad=[],this.includePoster=!1,this.castProvider=null,this}var p=h.prototype=new s;return p.compatibility=function(e){e({hasFlashVersion:t.hasFlashPlayerVersion("10.2")})},p.embed=function(t,r){var i=this;i._settings=t,i._container=t.container;for(var s=0;s<t.plugins.toLoad.length;s++){var o=t.plugins.toLoad[s];this.loadPlugin(o,o.data)}this.onLoad=r;var a=this._container.attr("id"),l="http://emp.bbci.co.uk/emp/smp-flash/smp.swf?1.9.17";t.playerType=="alternate"&&(l="https://ssl.stage.bbc.co.uk/emp/smp-flash/smp.swf?1.9.17");var c=this.name()+"SWF"+a,h={domId:a,jsCallbackMethod:"window.embeddedMedia.handle",forceGuidance:t.forceGuidance,today:u(t.today),isBSTime:f(t.today),waitOnPluginLoad:t.waitOnPluginLoad,uxHighlightColour:t.ui.colour,uxHighlightForeColour:t.ui.foreColour,customRdotBaseURL:t.customRdotBaseURL,enableRdotReporting:t.enableRdotReporting&&location.protocol!="https:",isTouchScreen:n.get().hasTouchScreen,embedReferer:document.referrer||"",embedPageUrl:t.embedPageURL,embedPageQuery:location.search&&location.search.length?location.search.substring(1):"",customDAXURL:t.customDAXURL,enableDaxReporting:t.enableDaxReporting,enableSonarReporting:t.enableSonarReporting,bumpVersion:window.embeddedMedia.version,comscoreURL:"http://sa.bbc.co.uk/bbc/nkdata/s",rumURL:"@sonar.rum.url@?",daxSessionID:t.daxSessionID,appName:t.appName,appType:t.appType,shouldShow3GWarning:n.get().connection.mobile&&!t.disable3GWarning&&!document.cookie.match(/3gAccepted=true/)};t.ui.locale&&(t.ui.locale.lang&&(h.lang=t.ui.locale.lang),t.ui.locale.path&&(h.localePath=t.ui.locale.path));var p="100%",d="100%",v="10.2",m={quality:"high",bgcolor:"000000",allowFullScreen:!0,allowScriptAccess:"always"},g={},y={position:"relative","z-index":"1",height:"100%",width:"100%","padding-bottom":0};t.superResponsive&&(y["padding-bottom"]="56.25%");var b,w,E,S,x;b=e("<div />").css(y);var T={"z-index":1e6,position:"fixed",top:"-9999px",left:"100px","background-color":"#ffffff",color:"#000000","border-style":"solid","border-width":"1px",padding:"8px 8px"},N="font-weight:bold; font-size : 0.9em; font-family: arial; color:black",C=t.locale();x=e('<div id="'+a+'jumpMediaPlayer"><a style="'+N+'" id="'+a+'jumpMediaPlayerLink" href="">'+window.embeddedMedia.language.t("jumpMediaPlayer",C)+"</a></div>").css(T).appendTo(b),E=e('<div id="'+a+'beforeFlash"><a style="'+N+'" id="'+a+'beforeFlashLink" href="http://www.bbc.co.uk/faqs/online/mp_accessibility_help">'+window.embeddedMedia.language.t("mediaPlayerHelp",C)+"</a></div>").css(T).appendTo(b);var k=function(){e(this).css({top:"100px"})},L=function(){e(this).css({top:"-9999px"})};x.focusin(k),x.focusout(L),E.focusin(k),E.focusout(L),x.keydown(function(e){var t=e.keyCode||e.which;if(t===13||t===32)e.preventDefault&&e.preventDefault(),i.focusAfterFlash()}),E.keydown(function(e){var t=e.keyCode||e.which;t===9&&!e.shiftKey&&(e.preventDefault&&e.preventDefault(),e.returnValue=!1,setTimeout(function(){i._swf&&(E.blur(),i._swf.focusOnFirst(),i._swf.tabIndex=0,i._swf.focus())},200))}),i.focusBeforeFlash=function(){var e=document.getElementById(a+"beforeFlashLink");e&&setTimeout(function(){e.focus()},10)},w=e("<div/>").css({position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px"}).appendTo(b),e("<div/>").attr({id:c}).appendTo(w),S=e('<div id="'+a+'afterFlash" style="z-index: 1000000;position:fixed;top: 10px;left : -999px;background-color: #ffffff;color: #000000;border-style:solid;border-width:1px;padding: 8px 8px"><a id="'+a+'returnToMediaPlayerLink" href="#afterFlash">'+window.embeddedMedia.language.t("outOfMediaPlayer",C)+"</a></div>").appendTo(b),S.keydown(function(e){var t=e.keyCode||e.which;if(t===13||t===32||t===9&&e.shiftKey)e.preventDefault&&e.preventDefault(),e.returnValue=!1,setTimeout(function(){i._swf&&(t===9?i._swf.focusOnLast():i._swf.focusOnFirst(),i._swf.tabIndex=0,i._swf.focus())},200)}),i.focusAfterFlash=function(){var e=document.getElementById(a+"returnToMediaPlayerLink");e&&setTimeout(function(){e.focus()},10)},i.focusOnFlash=function(){setTimeout(function(){i._swf&&(i._swf.tabIndex=0,i._swf.focus())},10)},i.wrapper=b,i._container.empty().append(b),i.attachListeners(),i.embeddingProperties=[l,c,p,d,v,!1,h,m,g,function(e){e&&e.success&&e.ref?(i._swf=e.ref,i.onLoad(i,!0)):i._settings.dispatch(6e3)}],i.embedIt()},p.embedIt=function(){t.embedSWF.apply(t,this.embeddingProperties)},p.attachListeners=function(){window.embeddedMedia.handle=c(this._settings.domid,this)},p.uiDefaults=function(){var e=this._settings.ui;this._settings.product=="iplayer"&&(e.cta||(e.cta={}),e.cta.iplayer=!0,this._settings.allowCasting&&(e.chromecast||(e.chromecast={enabled:!0}))),this._settings.guidanceCleared||(e.guidance||(e.guidance={}),e.guidance.pinRequired=!0),n.get().isMobileOrTablet&&(e.controls||(e.controls={volumeSlider:!1}),n.get().os&&n.get().os.blackberry&&(e.guidance||(e.guidance={}),e.guidance.useFlashGuidance=!1),e.controls.popout=!1,e.controls.volumeSlider||(e.controls.volumeSlider=!1),this._settings.volume=1)},p.hide=function(e){e?this._swf.style.visibility="hidden":this.wrapper[0].style.left="-9000px"},p.show=function(e){this._swf.style.visibility="visible",this.wrapper[0].style.left="0px",e&&this.play()},p.initialised=function(){var e=this;e.uiDefaults(),e.call("setUIOptions",e._settings.ui),e._volume=e._settings.volume,e.call("volume",e._volume),e._muted=e._settings.muted,e.call("muted",e._muted);for(var t=0;t<e._pluginsToLoad.length;t++){var n=e._pluginsToLoad[t];e.setData(n.data),n.swf&&e.loadPluginWithCheck(n.swf)}e.ready=!0,e.call("updateGuidance",e._settings.guidance),e.loadPlaylist();var r=window.embeddedMedia,i=!1;r.openCallbacks.push(function(){e.hide(),e._playing&&!e.paused()&&(i=!0,e.pause())}),r.closedCallbacks.push(function(){e.show(i),i=!1,e._restoreFocus&&(e._restoreFocus=!1,e.focusOnFlash(),e._swf.focusOnFirst())});var s=r.parentalGuidance;s.closedCallbacks.push(function(t){e.call("guidanceClosed",t);if(e._gCalled){e._gCalled=!1;if(t&&!e._lockClicked){var n=e._settings.startTime;isNaN(n)&&(n=0),e.currentTime(n)}}}),s.updateCallbacks.push(function(t){var n=e._settings;t.noPin=n.guidanceCleared,n.guidance=t,e.call("updateGuidance",t)}),window.embeddedMedia.warn3G.updateCallbacks.push(function(){e.call("accepted3G")})},p.loadPlaylist=function(){var e=this;if(e._swf){var t={},i=e._settings;e._volume=i.volume;var s=r.mediaSet(i);t.xmlString=i.playlistXML,t.playlistUrl=i.playlist,t.mediaSet=s,t.embedPageURL=i.embedPageURL,t.customIStatsURL=i.customIStatsURL,t.counterName=i.counterName,t.appName=i.appName,t.appType=i.appType,t.quality=i.quality,t.siteID=i.siteID,t.overrideHoldingImage=i.overrideHoldingImage,t.customDAXURL=i.customDAXURL,t.enableDaxReporting=i.enableDaxReporting,t.enableSonarReporting=i.enableSonarReporting,t.comscoreURL="http://sa.bbc.co.uk/bbc/nkdata/s",t.rumURL="@sonar.rum.url@?",t.bumpVersion=window.embeddedMedia.version,t.parentPID=i.statsObject.parentPID,t.echoTrace=i.statsObject.trace,t.parentPIDType=i.statsObject.parentPIDType,t.daxSessionID=i.daxSessionID,t.suppressItemKind=i.suppressItemKind,t.startTime=i.startTime,t.sessionID=i.sessionID,t.unreliableTimecodes=i.unreliableTimecodes,t.pageType=i.pageType,t.parentSection=i.parentSection,t.edition=i.edition,t.uniqueId=i.uniqueID,i.sessionID="",typeof i.bitrateFloor=="number"&&(t.bitrateFloor=i.bitrateFloor),typeof i.bitrateCeiling=="number"&&(t.bitrateCeiling=i.bitrateCeiling),typeof i.limitQuality=="number"?t.limitQuality=i.limitQuality:i.lowBandwidth&&(t.limitQuality=1),t.autoPlay=i.autoplay,t.promptGuidanceWhenAutoplay=i.promptGuidanceWhenAutoplay,t.enableStageVideo=i.disableStageVideo||!n.os||n.os.win!="xp"||!i.superResponsive;var o=(location.protocol=="https:"?"https:":"http:")+"//{host}/mediaselector/5/select/version/2.0/mediaset/{mediaset}/vpid/{id}";t.mediationUrl=r.mediatorHref(i,s,o),i.mediator.fck&&(t.forceConnectionSupplier=i.mediator.fck),i.playlistObject?e.call("setPlaylistObject",{playlist:i.playlistObject,options:t}):e.call("setPlaylistOptions",t),e.webcastData(i.webcastData)}},p.call=function(e,t){this._swf.call?(this.hasCalledSwf=!0,this._swf.call(e,t)):this.hasCalledSwf&&(e=="setPlaylistOptions"||e=="setPlaylistObject")&&this.embedIt()},p.loadPlugin=function(e,t){e&&e.swf&&(this.ready?(this.setData(t),this.loadPluginWithCheck(e.swf)):this._pluginsToLoad.push({swf:e.swf,data:t}))},p.loadPluginWithCheck=function(e){var t=this._settings.blacklistedPlugins;for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return;this.call("loadPlugin",e)},p.updateUiConfig=function(e){this.call("setUIOptions",e)},p.setData=function(e){if(e)if(e instanceof Array)for(var t=0;t<e.length;t++)this.call("setData",e[t]);else this.call("setData",e)},p.setPoster=function(e){e&&this.call("setPoster",e)},p.dispatchEvent=function(e,t){e&&this.call(e,t)},p.pauseAt=function(e){e&&(e=e instanceof Array?e:[e],this.call("pauseAt",e))},p.webcastData=function(e){e&&(s.prototype.webcastData.call(this,e),this.call("webcastData",e))},h}),define("mp/classes/xd",[],function(){var e=function(e){var t=this,n=document.getElementById(e);t._receiveKey=e,n&&n.contentWindow&&(t._postElement=n.contentWindow),t._listeners={};var r={};r[t._initXD]={receiveKey:t._receiveKey},t.post(r),t.receive(function(e){if(e.data){var n=e.data.type,r=e.data.data,i=t._listeners[n];if(i)for(var s=0;s<i.length;s++){var o=i[s];o.call(t,r)}}})};return e.prototype={_initXD:"initXD",_receiveKey:"",_postElement:null,_listeners:{},post:function(e){var t=this;return e&&t._postElement&&t._postElement.postMessage&&t._postElement.postMessage(JSON.stringify(e),"*"),t},receive:function(e){var t=this,n=function(n){if(n.data.indexOf("{")===0){var r={};for(var i in n)i=="data"?r[i]=JSON.parse(n[i]):r[i]=n[i];if(!r.data.receiveKey||r.data.receiveKey!==t._receiveKey)return!1;e(r)}};return window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent("onmessage",n),t},on:function(e,t){var n=this,r=function(){setTimeout(function(e){t.apply(n,e)},0,arguments)};return this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(r),n},fire:function(e,t){this.post({receiveKey:this._receiveKey,type:e,data:t})}},e}),define("mp/classes/players/html5/smp-html5",["jquery-1.9","mp/modules/device","mp/modules/html5","mp/classes/xd","mp/classes/errors/error","mp/classes/settingsbuilder","mp/classes/embedPopup","mp/classes/players/player"],function(e,t,n,r,i,s,o,u){function a(){return this._name="smphtml5",this.type="html",this._currentTime=0,this._duration=0,this._kind="",this.pluginsToLoad=[],this.includePoster=!1,this}function f(e){var n=[];return e.uiClass&&n.push(e.uiClass),e.defaultUiClass&&n.push(e.defaultUiClass),t.get().hasTouchScreen&&n.push("touch"),n.join(" ")}function l(e){return{embedReferer:document.referrer||"",embedPageUrl:e.embedPageUrl,embedPageQuery:e.embedPageQuery,playlist:e.playlist,playlistObject:e.playlistObject,width:e.plugins.player.width,height:e.plugins.player.height,isMobileNetwork:t.get().connection.mobile,uiClass:f(e),enable3G:!0,ui:e.ui,mediatorHref:p(e),forceGuidance:e.forceGuidance,guidance:e.guidance,iStatsDomain:e.customIStatsURL,enableDaxReporting:e.enableDaxReporting,daxDomain:e.customDAXURL,counterName:e.counterName,appName:e.appName,appType:e.appType,daxSessionID:e.daxSessionID,siteID:e.siteID,blockRestricted:!e.attemptRestrictedPlayback,startTime:e.startTime,autoplay:e.autoplay,overrideHoldingImage:e.overrideHoldingImage,config_plugin_iPlayerLiveStats:e.smp_html_istats,rDotBaseURL:e.customRdotBaseURL,enableRdotReporting:e.enableRdotReporting&&location.protocol!="https:",suppressType:e.suppressType,suppressItemKind:e.suppressItemKind,bitrateFloor:e.bitrateFloor,bitrateCeiling:e.bitrateCeiling,supportLiveRewind:e.supportLiveRewindOnMobile,promptGuidanceWhenAutoplay:e.promptGuidanceWhenAutoplay,shouldShow3GWarning:t.get().connection.mobile&&!e.disable3GWarning&&!document.cookie.match(/3gAccepted=true/),pageType:e.pageType,parentSection:e.parentSection,edition:e.edition,uniqueId:e.uniqueID}}function c(t){return function(n){var r=n.type,i=n.properties,s=e.Event(r);for(var u in n)u!="type"&&u!="_"&&(s[u]=n[u]);for(u in i)u!="type"&&(s[u]=i[u]);switch(r){case"initialised":t.initialised();break;case"loadedmetadata":t._duration=i.duration;break;case"timeupdate":t._currentTime=i.currentTime,t._duration=i.duration;break;case"volumechange":t._muted=i.muted,t._volume=i.volume;break;case"guidanceShow":t._gCalled=!0,t._lockClicked=i.lockClicked,window.embeddedMedia.parentalGuidance.show(n.properties,t._settings.ui.colour,t._settings.locale());break;case"guidanceLocked":window.embeddedMedia.parentalGuidance.setLocked(n.data,!0);break;case"linkRequest":var a=n.data;a.type==="managePIN"&&window.open("http://www.bbc.co.uk/guidance/help","pg"),a.type==="PGinfo"&&window.open("http://www.bbc.co.uk/guidance/help","pg");break;case"seeked":t._seeking=!1;break;case"seeking":t._seeking=!0;break;case"ended":t._ended=!0;break;case"pause":t._paused=!0;break;case"playing":t._paused=!1,t._ended=!1,t._kind=s.kind;break;case"embed":if(t.playlist){var f=new o;f.show(t)}break;case"playlistLoaded":t._seeking=!1,t._paused=!0,t._ended=!1,t._playing=!1,t.playlist=n.playlist;break;case"show3G":window.embeddedMedia.warn3G.show(t._settings,t,!0)}t._container.trigger(s)}}function p(e){return s.mediatorHref(e,s.mediaSet(e,"html5"),"{protocol}://{host}/mediaselector/5/select/version/2.0/vpid/{id}/format/json/mediaset/{mediaset}/jsfunc/{callback}")}var h=a.prototype=new u;return h.compatibility=function(e,r){e({isAvailable:t.get().os.ios||r.preferHtmlOnMobile,isMobileDevice:t.get().isMobileOrTablet,html5MediaSupported:n.media.video&&n.media.audio})},h.uiDefaults=function(){var e=this._settings.ui;this._settings.product=="iplayer"&&(e.cta||(e.cta={}),e.cta.iplayer=!0),this._settings.guidanceCleared||(e.guidance||(e.guidance={}),e.guidance.pinRequired=!0)},h.embed=function(n,i){var s=this;s._settings=n,s._container=n.container,s._container.empty(),s.uiDefaults();for(var o=0;o<n.plugins.toLoad.length;o++){var u=n.plugins.toLoad[o];s.loadPlugin(u,u.data)}var a=t.get();n.attemptHlsPlaybackOnAndroid&&a.allowHlsVod(),a.hasHlsVodSupport||n.suppressType.push("hls"),location.host.indexOf("bbc.co.uk")!==-1&&(document.domain="bbc.co.uk");var f="http://www.bbc.co.uk/emp/releases/smp-html/player.html?1.3.2";n.playerType=="alternate"&&(f="http://www.bbc.co.uk/emp/releases/smp-html/player.html?1.3.2"),document.cookie.match(/html5Debug=true/)&&(f="http://www.bbc.co.uk/emp/releases/smp-html/debug.html");var l={"border-bottom":0,"z-index":"999",position:"relative",height:"100%",width:"100%","padding-bottom":0};s.uniqueId="X"+Math.random();var h=s._container;n.superResponsive&&(l["padding-bottom"]="56.25%");var p=s.wrapper=e("<div />").css(l).appendTo(h),d=e("<iframe />").attr({id:s.getId(),name:s.getId(),frameborder:"0",scrolling:"no",src:f}).css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"}).appendTo(p).load(function(){var t=e(this).attr("id"),n,i=document.body.style,o,u=document.documentElement.style,a,f;s._fullScreen=!1;var h=function(){s._fullScreen=!0,a||(a=document.createElement("meta"),a.name="viewport",a.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",document.getElementsByTagName("head")[0].appendChild(a));var t=document.getElementById("orb-banner");t&&(t.style.visibility="hidden"),n=i.overflow,i.overflow="hidden",o=u.overflow,u.overflow="hidden",e(document.body).bind("touchmove.playerFullscreen",function(e){e.preventDefault()});var r=s.resizePlayer=function(){var e=window.innerWidth,t=window.innerHeight;p.css({position:"fixed",top:"0px",left:"0px","z-index":"2147483600",height:t+"px",width:e+"px","padding-bottom":"0"}),p[0].style.WebkitTransform="translate3d(0,0,0)"},l=function(){r(),clearTimeout(f),f=setTimeout(r,200)};r(),e(window).bind("resize.playerFullscreen orientationchange.playerFullscreen",l)};s._pfs=playerFullscreenExit=function(){s._fullScreen=!1,s.resizePlayer=null,clearTimeout(f),a&&(document.getElementsByTagName("head")[0].removeChild(a),a=null);var t=document.getElementById("orb-banner");t&&(t.style.visibility="visible"),e(window).unbind("resize.playerFullscreen orientationchange.playerFullscreen"),p.css(l),p[0].style.WebkitTransform="",i.overflow=n,u.overflow=o,e(document.body).unbind("touchmove.playerFullscreen")},s.xd=new r(t),s.xd.on("jsapi",c(s)).on("playerFullscreenEnter",h).on("playerFullscreenExit",playerFullscreenExit),typeof window.JSON!="object"?require(["http://emp.bbci.co.uk/emp/assets/bump-3/json.js"],function(){s.fireBootstrap()}):s.fireBootstrap()});window.addEventListener&&window.addEventListener("pageshow",function(e){e.persisted&&(d.attr("src",function(e,t){return t}),s._fullScreen&&s._pfs())}),i(s)},h.fireBootstrap=function(){var e=this;window.embeddedMedia.playerInstances[e.uniqueId]=e;var t={build:"SMP-BUMP",player:{vars:l(e._settings)},id:e.uniqueId,requireMap:window.bbcRequireMap};try{var n=document.getElementById(e.getId());n.contentWindow.bootstrap(t)}catch(r){e.xd.fire("bootstrap",t)}},h.updateUiConfig=function(e){this.call("updateUiConfig",e)},h.loadPlaylist=function(){if(this.ready){var e=this._settings;e.playlistObject?this.call("loadPlaylist",[e.playlistObject,e.autoplay,e.overrideHoldingImage,e.startTime,e.promptGuidanceWhenAutoplay]):this.call("loadPlaylist",[e.playlist,e.autoplay,e.overrideHoldingImage,e.startTime,e.promptGuidanceWhenAutoplay])}},h.getId=function(){return this._name+"iframe"+this._settings.domid},h.call=function(e,t){try{var n=document.getElementById(this.getId());t instanceof Array?n.contentWindow.player[e].apply(n.contentWindow.player,t):n.contentWindow.player[e](t)}catch(r){this.xd.fire("jsapi",{call:e,params:t})}},h.loadPlugin=function(e,t){e&&e.html&&(this.ready?this.call("loadPlugin",[e.html,t]):this.pluginsToLoad.push({url:e.html,data:t}))},h.setData=function(e){if(e)if(e instanceof Array)for(var t=0;t<e.length;t++)this.call("setData",e[t]);else this.call("setData",e)},h.webcastData=function(e){e&&(u.prototype.webcastData.call(this,e),this.setData({name:"SMP.webcastData",data:e}))},h.setPoster=function(e){this.ready&&e&&this.call("setPoster",e)},h.dispatchEvent=function(e,t){e&&this.call("dispatch",{type:e,data:t},!0)},h.pauseAt=function(e){e&&(e=e instanceof Array?e:[e],this.call("pauseAt",{times:e}))},h.show=function(e){this.wrapper[0].firstChild.style.width="100%",this._settings.tryPlayAfterInHtml&&e&&this.play()},h.hide=function(){this.wrapper[0].firstChild.style.width="0%"},h.getHandleJSAPI=function(){return c(this)},h.initialised=function(){var e=this;e.ready=!0;for(var t=0;t<e.pluginsToLoad.length;t++){var n=e.pluginsToLoad[t];e.setData(n.data),e.call("loadPlugin",[n.url,n.data])}window.embeddedMedia.parentalGuidance.closedCallbacks.push(function(t){e.call("guidanceClosed",[t]),setTimeout(function(){e.resizePlayer&&e.resizePlayer()},500),e._gCalled&&t&&!e._lockClicked&&e.play(),e._gCalled=!1}),window.embeddedMedia.parentalGuidance.updateCallbacks.push(function(t){e._settings.guidance=t,e.call("updateGuidance",t)}),window.embeddedMedia.warn3G.updateCallbacks.push(function(){e.call("accepted3G")})},a}),define("mp/classes/players/app",["jquery-1.9","mp/classes/players/player"],function(e,t){function r(){var t=this,n=t._settings;if(!n.playlist)return!0;var r=n.ui.colour+"",s=this.css;n.superResponsive&&(s["padding-bottom"]="56.25%"),t.wrapper||(t.wrapper=e("<div />").css(s),t.wrapperPopup=e("<div />").css(s));var o=n.product==="iplayer"?'url("http://emp.bbci.co.uk/emp/assets/images/cta_play.png")':'url("http://emp.bbci.co.uk/emp/assets/images/cta_play_journalism.png")';n.ui.cta&&n.ui.cta.custom!==undefined&&(o='url("'+n.ui.cta.custom+'")');var u=window.embeddedMedia.language.t("aaampPlay",n.locale()),a=e('<a id="cta"/>').attr({title:u}),f=n.ui[t.classStr];f?a[0].className=f:(a.css({backgroundImage:o,"background-position":"center","background-repeat":"no-repeat","background-color":"rgba(0,0,0,0.75)",opacity:.75,width:"80px",height:"80px",display:"block",position:"absolute",bottom:"0px"}),t._container.bind({"mousedown touchstart":function(){e(a).css({"background-color":r})},"mousemove touchmove mouseup touchend":function(){e(a).css({"background-color":"rgba(0,0,0,0.75)"})}}));if(n.includeAppClickHandler){var l=!1,c,h=function(){l=!1};t._container.bind("click",function(){if(t.wrapper[0].style.display!="")return;l||(t.dax&&setTimeout(function(){t.dax.trackAction("play","click",{mediaplayer_name:t.daxname,mediaplayer_type:"video"})},50),t.play(),l=!0,clearTimeout(c),c=setTimeout(h,100))})}t.wrapper.append(a),t._container.empty().append(t.wrapper);var p=n.forceGuidance||n[t._guidance];return p&&t.wrapper.append(i(p)),!1}function i(e){var t=document.createElement("div");t.id="p_guidance";var n=document.createElement("div");n.id="p_guidanceBox";var r=document.createElement("span");r.id="redCirc";var i=document.createElement("span");i.id="redCirc_c",r.appendChild(i),i.textContent="G",i.setAttribute("aria-labelledby","p_guidanceText"),n.appendChild(r);var s=document.createElement("span");s.id="p_guidanceText",s.textContent=e,n.appendChild(s),t.appendChild(n);var o=document.createElement("style"),u=document.getElementsByTagName("head")[0];u.appendChild(o);var a=o.sheet?o.sheet:o.styleSheet;return a.insertRule("#p_guidance {position:absolute;left: 81px;height:80px;bottom:0px;background-color: rgba(0, 0, 0, 0.56);margin-top: -40px;display:table; padding-right:30px;}",0),a.insertRule("#p_guidanceBox {color:#ffffff;font-size:14px;font-weight:bold;padding-left:5px;display:table-cell;vertical-align:middle;}",1),a.insertRule("#redCirc_c {position:relative;left:3px;top:1px;line-height:normal}",2),a.insertRule("#p_guidanceText {margin-left:5px;}",3),a.insertRule("#redCirc {display:inline-block;margin:auto;border-radius:50%;height:18px;width:18px;background-color:red;}",4),t}function s(e){return this._name=e,this}var n={position:"relative","z-index":"1",height:"100%",width:"100%",cursor:"pointer","padding-bottom":0},o=s.prototype=new t;return o.createCta=r,o.css=n,o.embed=function(e,t){var n=this;n._settings=e,n._container=e.container,e.playlistObject&&e.playlistObject.legacyPlaylist&&(e.playlist=e.legacyPlaylist),n.ctaNeedsCreating=n.createCta(),e.configVars.siteid=n._settings.siteID,e.configVars.counterName=n._settings.counterName,n.extraEmbed&&n.extraEmbed(),t(n),n._container.trigger("initialised")},o.show=function(e){this.wrapper.children().show(),e&&this.play()},o.hide=function(){this.wrapper.children().hide()},o.loadPlaylist=function(){var e=this,t=e._settings;t.playlistObject&&t.playlistObject.legacyPlaylist&&(t.playlist=t.playlistObject.legacyPlaylist),e.ctaNeedsCreating&&setTimeout(function(){e.ctaNeedsCreating=e.createCta()},100),t.autoplay&&e.play(),e.resetContainer&&e.resetContainer()},s}),define("mp/classes/players/apps/smp-air",["jquery-1.9","mp/modules/device","mp/classes/settingsbuilder","mp/classes/players/app"],function(e,t,n,r){function i(e,t){return t!=null?typeof t=="string"&&t.length===0?"":"&"+e+"="+t:""}function s(r){if(!r.playlist)return;var s="?playlistUrl="+r.playlist,o={};o.mediator=n.mediatorHref(r,n.mediaSet(r),"{protocol}://{host}/mediaselector/5/select/version/2.0/mediaset/{mediaset}/vpid/{id}{filter}"),o.uxHighlightColour=r.ui.colour.toString().replace("#","0x"),o.uxFc=r.ui.foreColour.toString().replace("#","0x"),o.uxAc=r.ui.alternateColour.toString().replace("#","0x"),o.uxAfc=r.ui.alternateForeColour.toString().replace("#","0x"),r.ui.locale&&(r.ui.locale.lang&&(o.lang=r.ui.locale.lang),r.ui.locale.path&&(o.langPath=r.ui.locale.path)),r.plugins&&r.plugins.smpAirPlugins&&(o.pluginSet=r.plugins.smpAirPlugins),r.startTime>0&&(o.startTime=r.startTime),t.get().os.kindleSilk&&r.kindlePolicy?o.policy=r.kindlePolicy:r.policy&&(o.policy=r.policy),r.webcastData&&(r.webcastData.accurateStartTime&&(o.AST=r.webcastData.accurateStartTime),r.webcastData.scheduledEndTime&&(o.SET=r.webcastData.scheduledEndTime),r.webcastData.accurateStartTime&&(o.AET=r.webcastData.accurateEndTime)),o.enableRdotReporting=r.enableRdotReporting,o.enableSonarReporting=r.enableSonarReporting,o.enableBitrateSwitching=r.enableBitrateSwitching,r.ui.controls&&(o.enableLiveRewind=r.ui.controls.enableLiveRewind),e.each(o,function(e,t){s+=i(e,t)});var u=r.lowBandwidth?500:900,a=r.lowBandwidth?450:600;return t.get().connection.mobile&&(u=r.lowBandwidth?350:500,a=r.lowBandwidth?150:280),s+="&bitrateceiling="+u+"&bitratefloor="+a,e.each(r.configVars,function(e,t){s+=i(e,t)}),s}function o(e,t){var n="intent://play/"+s(t)+"#Intent;scheme=bbcmediaplayer;package=air.uk.co.bbc.android.mediaplayer;end";window.location=n}function u(){return/Chrome/.test(navigator.userAgent)}function a(){return t.get().os.kindleSilk?"http://www.amazon.co.uk/Media-Applications-Technologies-Ltd-Player/dp/B009SQRRCG/ref=sr_1_2?s=mobile-apps&ie=UTF8&qid=1392817067&sr=1-2":"market://details?id=air.uk.co.bbc.android.mediaplayer"}function f(t,n,r){var i=new Date-r;if(!(i>600||window.name=="true")){var s=document.createElement("style"),o=document.getElementsByTagName("head")[0];o.appendChild(s);var u=t._container.width(),f=s.sheet?s.sheet:s.styleSheet;u>300?f.insertRule("#marketPlacePopup{position:absolute;width:272px;height:93px;padding-top:16px; left:"+Math.floor((u-272)/2)+"px}",0):f.insertRule("#marketPlacePopup{position:fixed;width:272px;height:93px;left:10px;top:60px;padding:10px;margin-left:16px;z-index:100000;background-color:white;height:234px}",0),f.insertRule("#marketPlacePopupHeader,#marketPlacePopupMessage{padding:8px 8px 0;color:#fff;font-size:1.4em;line-height:1.143;background:rgba(0,0,0,0.75)}",1),f.insertRule("#marketPlacePopupHeader{font-size:1.8em;line-height:1.333}",2),f.insertRule("#marketPlacePopupMessage{padding-bottom:6px}",3),f.insertRule(".buttons{width:100%;display:block;margin-top:2px}",4),f.insertRule("#marketPlacePopupInstallButton:hover,#marketPlacePopupCancelButton:hover,#marketPlacePopupInstallButton:focus,#marketPlacePopupCancelButton:focus{background:"+n.ui.colour+"}",5),f.insertRule("#marketPlacePopupInstallButton,#marketPlacePopupCancelButton{width:49%;height:44px;padding:0 16px;line-height:44px;font-size:1.4em;text-transform:uppercase;color:#1c1c1c;background:#dcdcdc}",6),f.insertRule("#marketPlacePopupCancelButton{float:right}",7);var l=n.locale(),c=window.embeddedMedia.language,h=c.t("aaampTitle",l),p=c.t("aaampMsg",l),d=c.t("aaampInstall",l),v=c.t("aaampCancel",l);t._container.trigger(e.Event("showingAppInstallPrompt"));var m=e('<div id="marketPlacePopup"><div id="marketPlacePopupHeader" class="marketPlacePopupHeader">'+h+'</div><div id="marketPlacePopupMessage" class="marketPlacePopupMessage">'+p+'</div><div id="marketPlacePopupButton" class="buttons"><button id="marketPlacePopupInstallButton" class="install">'+d+'</button><button id="marketPlacePopupCancelButton" class="cancel">'+v+"</button></div></div>");t._container.unbind("mousedown touchstart mouseup touchend mousemove touchmove"),t.wrapper[0].style.display="none",u>300?(t._container.append(t.wrapperPopup),t.wrapperPopup.append(m)):e(document.body).append(m),t.resetContainer=function(){document.getElementById("marketPlacePopup").parentNode.removeChild(document.getElementById("marketPlacePopup")),setTimeout(function(){t._container.trigger(e.Event("hidingAppInstallPrompt")),t.wrapper[0].style.display=""},250)},e("#marketPlacePopupInstallButton").bind({"mouseup touchend":function(){return e("#marketPlacePopupInstallButton").unbind("mouseup touchend"),t.resetContainer(),window.location=a(),!1}}),e("#marketPlacePopupCancelButton").bind({"mouseup touchend":function(){return e("#marketPlacePopupCancelButton").unbind("mouseup touchend"),t.resetContainer(),!1}})}}function l(t,n){var r=e("iframe",t._container).length>0;if(!r){var i=+(new Date),o=e("<iframe />").css({display:"none"}).attr({id:"BBCMediaPlayer",src:"bbcmediaplayer://play/"+s(n)}),u=setTimeout(function(){clearTimeout(u),o.remove(),f(t,n,i)},500);t._container.append(o)}}function c(){var e=this,t=e._settings;return u()?o(e,t):l(e,t),!1}function h(e){e({isAndroid:!1})}function p(){function r(){if(document.hidden!==undefined)window.name=document.hidden;else{var e=["webkit","moz","ms","o"];for(var t=0;t<e.length;t++)document[e[t]+"Hidden"]!==undefined&&(window.name=document[e[t]+"Hidden"])}}var t={hidden:"visibilitychange",mozHidden:"mozvisibilitychange",webkitHidden:"webkitvisibilitychange",msHidden:"msvisibilitychange",oHidden:"ovisibilitychange"};for(var n in t)if(t.hasOwnProperty(n)&&n in document){document.addEventListener(t[n],r);break}e(window).blur(function(){window.name="true"}),e(window).focus(function(){window.name="false"})}function d(){return this.daxname="SMPAIR",this.classStr="aaampCTAcss",this._guidance="aaampGuidance",this.compatibility=h,this}return d.prototype=new r("smpair",!0),d.prototype.play=c,d.prototype.extraEmbed=p,d.prototype.playlistOptions=s,d.prototype.getMarketPlaceURL=a,d}),define("mp/classes/players/apps/aaamp",["jquery-1.9","mp/modules/device","mp/classes/settingsbuilder","mp/classes/players/app"],function(e,t,n,r){function i(r){var i=r.playlist,s="?playlisturl="+i,o=n.mediatorHref(r,n.mediaSet(r),"{protocol}://{host}/mediaselector/5/select/version/2.0/mediaset/{mediaset}/proto/rtmp/vpid/{id}{filter}");s+="&mediator="+o,s+="&uxHighlightColour="+r.ui.colour.toString().replace("#","0x");var u=r.lowBandwidth?500:900,a=r.lowBandwidth?450:600;return t.get().connection.mobile&&(u=r.lowBandwidth?350:500,a=r.lowBandwidth?150:280),s+="&bitrateceiling="+u+"&bitratefloor="+a,e.each(r.configVars,function(e,t){t=String(t),t.length&&(s+="&"+e+"="+t)}),s}function s(){var t=this,n=t._settings;if(!n.playlist)return;if(/Chrome/.test(navigator.userAgent)){var r="intent://play/"+i(n)+"#Intent;scheme=bbcmediaplayer;package=air.uk.co.bbc.android.mediaplayer;end";window.location=r}else{var s=e("iframe",t._container).length>0;if(!s){var o=+(new Date),u=e("<iframe />").css({display:"none"}).attr({id:"BBCMediaPlayer",src:"bbcmediaplayer://play/"+i(n)}),a=setTimeout(function(){clearTimeout(a),u.remove();var r=new Date-o;if(!(r>600||window.name=="true")){var i=document.createElement("style"),s=document.getElementsByTagName("head")[0];s.appendChild(i);var f=t._container.width(),l=i.sheet?i.sheet:i.styleSheet;f>300?l.insertRule("#marketPlacePopup{position:absolute;width:272px;height:93px;padding-top:16px; left:"+Math.floor((f-272)/2)+"px}",0):l.insertRule("#marketPlacePopup{position:fixed;width:272px;height:93px;left:10px;top:60px;padding:10px;margin-left:16px;z-index:100000;background-color:white;height:234px}",0),l.insertRule("#marketPlacePopupHeader,#marketPlacePopupMessage{padding:8px 8px 0;color:#fff;font-size:1.4em;line-height:1.143;background:rgba(0,0,0,0.75)}",1),l.insertRule("#marketPlacePopupHeader{font-size:1.8em;line-height:1.333}",2),l.insertRule("#marketPlacePopupMessage{padding-bottom:6px}",3),l.insertRule(".buttons{width:100%;display:block;margin-top:2px}",4),l.insertRule("#marketPlacePopupInstallButton:hover,#marketPlacePopupCancelButton:hover,#marketPlacePopupInstallButton:focus,#marketPlacePopupCancelButton:focus{background:"+n.ui.colour+"}",5),l.insertRule("#marketPlacePopupInstallButton,#marketPlacePopupCancelButton{width:49%;height:44px;padding:0 16px;line-height:44px;font-size:1.4em;text-transform:uppercase;color:#1c1c1c;background:#dcdcdc}",6),l.insertRule("#marketPlacePopupCancelButton{float:right}",7);var c=n.locale(),h=window.embeddedMedia.language,p=h.t("aaampTitle",c),d=h.t("aaampMsg",c),v=h.t("aaampInstall",c),m=h.t("aaampCancel",c);t._container.trigger(e.Event("showingAppInstallPrompt"));var g=e('<div id="marketPlacePopup"><div id="marketPlacePopupHeader" class="marketPlacePopupHeader">'+p+'</div><div id="marketPlacePopupMessage" class="marketPlacePopupMessage">'+d+'</div><div id="marketPlacePopupButton" class="buttons"><button id="marketPlacePopupInstallButton" class="install">'+v+'</button><button id="marketPlacePopupCancelButton" class="cancel">'+m+"</button></div></div>");t._container.unbind("mousedown touchstart mouseup touchend mousemove touchmove"),t.wrapper[0].style.display="none",f>300?(t._container.append(t.wrapperPopup),t.wrapperPopup.append(g)):e(document.body).append(g),t.resetContainer=function(){setTimeout(function(){t.wrapper[0].style.display="",t._container.trigger(e.Event("hidingAppInstallPrompt"))},250),document.getElementById("marketPlacePopup").parentNode.removeChild(document.getElementById("marketPlacePopup"))},e("#marketPlacePopupInstallButton").bind({"mouseup touchend":function(){return t.resetContainer(),e("#marketPlacePopupInstallButton").unbind("mouseup touchend"),window.location="market://details?id=air.uk.co.bbc.android.mediaplayer",!1}}),e("#marketPlacePopupCancelButton").bind({"mouseup touchend":function(){return t.resetContainer(),e("#marketPlacePopupCancelButton").unbind("mouseup touchend"),!1}})}},500);t._container.append(u)}}return!1}function o(){return this.daxname="SMPAAAMP",this.classStr="aaampCTAcss",this._guidance="aaampGuidance",this.compatibility=u,this}function u(e){e({isAndroid:t.get().os.android||t.get().os.kindleSilk})}function a(){function r(){if(document.hidden!==undefined)window.name=document.hidden;else{var e=["webkit","moz","ms","o"];for(var t=0;t<e.length;t++)document[e[t]+"Hidden"]!==undefined&&(window.name=document[e[t]+"Hidden"])}}var t={hidden:"visibilitychange",mozHidden:"mozvisibilitychange",webkitHidden:"webkitvisibilitychange",msHidden:"msvisibilitychange",oHidden:"ovisibilitychange"};for(var n in t)if(t.hasOwnProperty(n)&&n in document){document.addEventListener(t[n],r);break}e(window).blur(function(){window.name="true"}),e(window).focus(function(){window.name="false"})}return o.prototype=new r("aaamp",!0),o.prototype.play=s,o.prototype.extraEmbed=a,o.prototype.playlistOptions=i,o}),define("mp/classes/players/apps/wmp",["jquery-1.9","mp/modules/device","mp/classes/players/app"],function(e,t,n){function r(e){if(e){var t="",n=e.indexOf("playlist")+9,r=e.indexOf("/",n);return r===-1&&(r=e.length),t=e.substring(n,r),t}return null}function i(){return this.daxname="SMPWMP",this.classStr="wmpCTAcss",this._guidance="wmpGuidance",this.compatibility=o,this}function s(){var e=this._settings;if(!e.playlist)return;var t=e.probablyLive?"live":"programme",n=t+": "+r(e.playlist);window.external.notify(n)}function o(e,n){e({productCompatible:n.requestWMP,isWindowsPhone:t.get().os.winphone,hasNotify:window.external&&"notify"in window.external})}return i.prototype=new n("wmp",!0),i.prototype.play=s,i}),define("mp/modules/players",["mp/classes/players/flash/smp-flash","mp/classes/players/html5/smp-html5","mp/classes/players/apps/smp-air","mp/classes/players/apps/aaamp","mp/classes/players/apps/wmp"],function(e,t,n,r,i){return[e,t,n,r,i]}),define("mp/classes/decisionengine",["jquery-1.9","swfobject-2","mp/modules/device","mp/modules/html5","mp/modules/players"],function(e,t,n,r,i){function s(e){return this._settings=e,this}return s.prototype={embed:function(e){this.player||this.decide();var t=this.player;return t&&t.embed(this._settings,e),t},decide:function(){var t=this,r=document.cookie.match(/bbcBumpForcePlayer=(.*?)(?:;|$)/),s=r&&r.length?r[1]:"",o=this._settings,u=[];if(o.showUnsupportedMessage&&s==="")return t;var a=i.concat();if(o.overrideSortOrder){var f=o.overrideSortOrder;for(var l=0;l<f.length;l++){var c=f[l];for(var h=0;h<a.length;h++)if(a[h]()._name==c){u.push(a[h]),a.splice(h,1);break}}u=u.concat(a)}else if(o.preferHtmlOnMobile&&n.get().isMobileOrTablet){var p=[];for(var d=0;d<a.length;d++)a[d]().type=="html"?u.push(a[d]):p.push(a[d]);u=u.concat(p)}else u=a.concat();return e.each(u,function(n,r){var i=new r;i.compatibility(function(n){if(!t.player){var r=!0;e.each(n,function(e,t){r=t&&r});if(s==i._name||s===""&&r)t.player=i,t.name=i._name}},t._settings)}),t.player},deviceData:function(){return{device:n.get(),html5:r,flash:{flashPlayerVersion:t.getFlashPlayerVersion()}}}},s}),define("mp/classes/rdotreporting",[],function(){function s(e){var t=new Image;return t.src=e+"&cb="+(new Date).getTime(),e}function o(){return[e,n,"-",t,window.embeddedMedia.version,"-",r]}function u(e){var t=o();for(var n=0;n<e.length;n++)t.push(encodeURIComponent(e[n]));return t.join("/")}var e="http://r.bbci.co.uk/e",t="bumpv3",n="mediaplayout",r="",i={},a,f;return{init:function(t,n,s){i={},a=t&&location.protocol!="https:",r=encodeURIComponent(n),s&&s!==""&&(e=s.replace(/\/*$/g,""))},updatePlaylistURL:function(e){f=e},trackError:function(e){if(a)return s(u(["error",e]))}}}),define("mp/classes/parentalguidance",[],function(){function m(e){e.preventDefault()}function g(e){return!e||e.length<4?!1:/[^0-9]/.test(e)?!1:!0}function y(){return h!==""&&typeof h!="undefined"}function b(){if(location.hostname=="www.bbc.co.uk"||location.hostname=="www.stage.bbc.co.uk"){var e=document.cookie.match(/(^|;)\s*BBCPGstat=(.)/),t=["","unset","off","on"][e?1+1*e[2]:0]||"unknown";c=t==="off"||t==="on"}f=S("pgAgeConfirm")==="true";var n=S("pgPIN");n!=null&&n!==""&&(h=n);var r=S("pgUnlocked");p=r=="true"}function E(e){return a=[],f=!1,this.closedCallbacks=[],this.updateCallbacks=[],d=e||{trackAction:function(){}},this.guidance={},b(),this._isLocked=y()&&!p,o=window.embeddedMedia.language,this.updateGuidanceState(),this}function S(e){var t="ckps_"+e,n=document.cookie,r=n.indexOf(" "+t+"=");r==-1&&(r=n.indexOf(t+"="));if(r==-1)n=null;else{r=n.indexOf("=",r)+1;var i=n.indexOf(";",r);i==-1&&(i=n.length),n=unescape(n.substring(r,i))}return n}function x(e,t,n){var r="";if(!n){var i=new Date;i.setTime(i.getTime()+15552e6),r="; expires="+i.toGMTString()}var s="ckps_",o=location.hostname;o.indexOf(".bbc.co.uk")!==-1&&(o=".bbc.co.uk"),o.indexOf(".bbc.com")!==-1&&(o=".bbc.com"),document.cookie=s+e+"="+escape(t)+r+"; Domain="+o+"; Path=/"}function N(e,t,n,r){var i=T();i.open(n,e,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){if(i.readyState==4){if(i.status==200&&i.responseText==="OK"){r.ok();return}r.notok()}},i.send(t)}function C(e){while(e.lastChild)e.removeChild(e.lastChild)}function k(e,t){a.push(e),e.setAttribute("tabindex","0"),e.onkeydown=function(t){t=t||window.event;var n=t.keyCode||t.which;if(n!=9&&n!=13)return;t.preventDefault?t.preventDefault():t.returnValue=!1;if(n==9){var r=a.length-1;t.shiftKey?u=u===0?r:u-1:u=u===r?0:u+1,setTimeout(function(){a[u].focus()},200)}else setTimeout(function(){e.click()},200)},t&&(u=a.length-1,e.focus())}function L(){u=0,a=[],k(i)}function A(e){var t="";f?(e.style.backgroundPosition="center",t=o.t("pgAriaAgeConfirmCheckBox",s)):(e.style.backgroundPosition="-30px",t=o.t("pgAriaAgeConfirmCheckBoxUnchecked",s)),e.setAttribute("aria-label",t),e.textContent=e.innerText=t}function O(e,t,n){var r=document.getElementById("pgErrorMessage");if(r)C(r);else{r=document.createElement("div"),r.id="pgErrorMessage";var i=r.style;i.width="122%",i.backgroundColor="#d13c2c",i.filter="alpha(opacity=70)",i.opacity=.7,i.marginTop="15px",i.marginBottom="5px",i.left="-25px",i.position="relative"}n&&e?e.insertBefore(r,e.firstChild):e.appendChild(r);var s=document.createElement("div");s.style.fontSize="14px",s.style.position="relative",s.style.left="10px",s.style.width="90%",s.style.color="#ffffff",s.style.fontSize="11px",s.style.textAlign="center",s.style.paddingTop=s.style.paddingBottom="10px",s.innerHTML=t,r.appendChild(s)}function M(u){if(e&&t)return!1;e=document.createElement("div"),e.setAttribute("tabindex","0"),e.id="parentalGuidanceBackground";var a=e.style;a.position="fixed",a.width="5000px",a.height="5000px",a.left="-500px",a.top="-500px",a.zIndex="2147483600",a.backgroundColor="#333333",a.filter="alpha(opacity=85)",a.opacity=.85,document.body.appendChild(e),t=document.createElement("div"),t.id="guidancePopup",t.setAttribute("role","alertdialog"),t.setAttribute("aria-labelledby","pgHeaderTitle");var f=t.style;f.position="fixed",f.width="290px",window.innerHeight>350?(f.top="50%",f.marginTop="-175px"):(f.top="5px",f.marginTop="0px"),f.marginLeft="-145px",f.left="50%",f.lineHeight="normal",f.verticalAlign="middle",f.color="white",f.fontSize="22px",f.zIndex="2147483600",f.backgroundColor="#141414",f.fontFamily="Arial, sans-serif",f.textAlign="left",document.body.appendChild(t),t.onkeydown=function(e){e=e||window.event;var t=e.keyCode||e.which;t===27&&u.close(!1)};var l=document.createElement("div");l.id="guidanceContainer",l.style.paddingRight=l.style.paddingLeft="26px",t.appendChild(l);var c=document.createElement("div");c.id="pgHeaderTitle",c.style.height="42px",c.style.position="relative",l.appendChild(c);var h=document.createElement("span");h.innerHTML=o.t("pgHeader",s),h.id="pgHeader",h.style.position="absolute",h.style.left="0px",h.style.bottom="0px",h.style.fontSize="18px",h.style.color="#ffffff",c.appendChild(h),n=document.createElement("div"),n.id="guidanceBody",n.style.position="relative",n.style.width="100%",l.appendChild(n),r=document.createElement("div"),r.id="guidanceFooter";var p=r.style;p.width="100%",p.height="42px",p.bottom="0px",p.display="table",p.textAlign="center",t.appendChild(r),i=document.createElement("a"),i.setAttribute("aria-label",o.t("pgClose",s)),i.id="pgExit";var m=i.style;i.title=o.t("pgClose",s),m.position="absolute",m.right=m.top="12px",m.cursor="pointer",m.width=m.height="15px",m.backgroundImage="url(http://emp.bbci.co.uk/emp/assets/bump-3/images/cross.png)",m.backgroundRepeat="no-repeat",t.appendChild(i);var g=!1;return setTimeout(function(){g=!0},500),i.onclick=function(e){g&&(e=e||window.event,e.preventDefault?e.preventDefault():e.returnValue=!1,d.trackAction(this.id,"click"),v.userAction(this.id,"click"),u.close(!1))},!0}function _(e){var t=document.createElement("div"),n=t.style;n.marginTop="-1px",n.position="absolute",n.opacity="0.2",n.filter="alpha(opacity=20)",n.width="100%",n.height="1px",n.backgroundColor="#ffffff",e.appendChild(t)}function D(e,t){function l(){a&&(d.trackAction(n.id,"click"),v.userAction(n.id,"click"),f())}var n=document.createElement("a");n.id=t.id,n.innerHTML=t.text,n.setAttribute("aria-label",t.text+" button");var i=n.style;i.cursor="pointer";try{i.display="table-cell"}catch(s){i.display="block"}i.verticalAlign="middle",i.width=i.height="100%",i.fontSize="18px",i.color="#ffffff",r.appendChild(n);var o=function(){i.backgroundColor=w},u=function(){i.backgroundColor=""},a=!1;setTimeout(function(){a=!0},500);var f=t.clickFunction;return n.onclick=l,n.onmouseover=o,n.onmouseout=u,n.onfocus=o,n.onblur=u,k(n,t.focus),n}function P(e,t,n){C(r),_(r);var i=D(e,t);if(n){i.style.width="50%",i.style.borderRightColor="#aaaaaa",i.style.borderRightWidth="1px",i.styleborderRightStyle="solid",D(e,n);var s=document.createElement("div");s.style.left="50%",s.style.position="absolute",s.style.opacity="0.2",s.style.filter="alpha(opacity=20)",s.style.width="1px",s.style.height=r.style.height,s.style.backgroundColor="#ffffff",r.appendChild(s)}}function H(e,t){C(n),L();var r=document.createElement("div");r.id="guidanceMessage";var i=r.style;i.marginTop="15px",i.marginBottom="5px",i.width="100%",i.position="relative",i.fontSize="13px",n.appendChild(r);var u=document.createElement("div");u.id="guidanceG";var a=u.style;a.display="inline-block",a.margin="auto",a.borderRadius="50%",a.width="15px",a.height="15px",a.backgroundColor="red",a.position="relative",a.top="-2px",a.fontSize="12px",r.appendChild(u);var l=document.createElement("span");l.innerHTML="G";var c=l.style;c.lineHeight="normal",c.position="relative",c.left="2px",c.top="1px",c.color="#ffffff",u.appendChild(l);var h=document.createElement("span");h.id="guidanceText",h.innerHTML=t,c=h.style,c.left="0px",c.top="16px",c.marginLeft="5px",c.lineHeight="16px",c.color="#868686",r.appendChild(h);var p=document.createElement("div");p.id="ageConfirm";var d=p.style;d.width="100%",d.height="57px",d.position="relative",d.fontSize="14px",d.color="#ffffff",n.appendChild(p);var v=document.createElement("button");v.id="ageConfirmCheck";var m=v.style;m.background="url(http://emp.bbci.co.uk/emp/assets/bump-3/images/tick.png) no-repeat center",m.backgroundPosition="-30px",m.position="absolute",m.left="0px",m.top="16px",m.height=m.width="25px",m.verticalAlign="middle",m.cursor="pointer",m.backgroundColor="#ffffff",m.borderWidth="0",m.textIndent="-9999px",m.whiteSpace="nowrap",m.overflow="hidden",p.appendChild(v),k(v,!0),A(v);var g=document.createElement("span");g.innerHTML=o.t("pgAgeConfirmation",s),g.style.position="relative",g.style.top="20px",g.style.marginLeft="35px",p.appendChild(g);var y=!1;setTimeout(function(){y=!0},500),v.onclick=function(){y&&(f=!f,A(v))};var b=function(){f?B(e):O(r,o.t("pgPasswordValidationError",s),!1)};P(e,{id:"pgAgeContinue",text:o.t("pgContinue",s),clickFunction:b})}function B(e){C(n),L();var t=document.createElement("div");t.setAttribute("role","alertdialog"),t.setAttribute("aria-labelledby","pgInfoHeader"),t.setAttribute("aria-describedby","pgInfo"),t.style.marginBottom="24px",n.appendChild(t);var r=document.createElement("div");r.id="pgInfoHeader",r.innerHTML=o.t("pgTurnOnParentalGuidance",s),r.style.marginTop="16px",r.style.height="24px",r.style.fontSize="14px",t.appendChild(r);if(l)var i="pgInfo",u="pgUnlock";else e._intent=="download"?(i="pgInfoPlusDownload",u="pgDownload"):(i="pgInfoPlusPlay",u="toolTipPlay");var a='<a id="pgLink" target="_blank" style="color:#ffffff; text-decoration:none;" href="http://www.bbc.co.uk/guidance/help">'+o.t("pgHeader",s)+"</a> "+o.t(i,s),f=document.createElement("div");f.id="pgInfo",f.innerHTML=a,f.style.fontSize="13px",f.style.color="#868686",t.appendChild(f);var c=f.getElementsByTagName("p");if(c)for(var h=0;h<c.length;h++)c[h].style.color="#868686",c[h].style.fontSize="13px";var p=document.getElementById("pgLink"),d=!1;setTimeout(function(){d=!0},500),p.onclick=function(){return d},k(p,!0);var v=function(){d&&(e.storeAgeConfirmation(),I(e))},m=function(){d&&(e.storeAgeConfirmation(),e.close(!0))},g={id:"pgTurnOn",text:o.t("pgTurnOn",s),clickFunction:v},y={id:"toolTipPlay",text:o.t(u,s),clickFunction:m};P(e,g,l?null:y)}function j(e){var t=document.createElement("div");t.id="pinEntry",t.style.width="100%",t.style.height="40px",t.style.marginBottom="25px",e.appendChild(t);var n=document.createElement("input");return n.setAttribute("maxlength",4),n.style.letterSpacing="5px",n.style.display="block",n.style.width="100%",n.style.height="100%",n.style.padding="0px",n.style.resize="none",n.style.color="#868686",n.style.fontSize="30px",n.style.textAlign="center",n.setAttribute("type","password"),n.pattern="[0-9]*",t.appendChild(n),n}function F(e,t){var n=!1,r=function(e){e=e||window.event;var r=e.keyCode||e.which;r===13&&n&&setTimeout(t,300)};setTimeout(function(){n=!0},400),e.addEventListener?e.addEventListener("keyup",r):e.onkeyup=r}function I(e){C(n),L();var t=document.createElement("div");t.id="activatePIN",t.style.marginTop="16px",t.style.fontSize="14px",t.style.color="#ffffff",n.appendChild(t);var r=document.createElement("span");r.innerHTML=o.t("pgEnterPIN",s),r.style.fontSize="14px",r.style.color="#ffffff",t.appendChild(r);var i=document.createElement("div");i.innerHTML="<span>"+o.t("pgActivateInfo",s)+"</span>",i.style.marginTop="10px",i.style.marginBottom="24px",i.style.fontSize="13px",i.style.color="#868686",n.appendChild(i);var u=j(n);u.setAttribute("aria-label",o.t("pgAriaPINEntryDescription",s)+"."+o.t("pgAriaPINPrompt",s)),k(u,!0);var a=function(){g(u.value)?(e.setPIN(u.value),e.setLocked(l),e.close(!l)):(u.value="",O(i,o.t("pgPINValidationError",s),!1),u.focus())},f=l?"pgActivate":e._intent==="download"?"pgDownload":"toolTipPlay";F(u,a),P(e,{id:"pgActivate",text:o.t(f,s),clickFunction:a})}function q(e,t){var n=document.createElement("div");n.style.marginBottom="20px",n.style.width="100%",n.style.height="15px",e.appendChild(n);var r=document.createElement("a");return r.setAttribute("target","_blank"),r.setAttribute("href","http://www.bbc.co.uk/guidance/help"),r.innerHTML=t,r.style.color="#ffffff",r.style.textDecoration="underline",r.style.width="100%",r.style.fontSize="14px",r.style.position="absolute",r.style.bottom="0px",r.style.textAlign="center",n.appendChild(r),r}function R(e){C(n),L();var t=document.createElement("div");t.id="enterPIN",t.style.marginTop="16px",t.style.paddingBottom="16px",t.style.width="100%",t.style.position="relative",t.style.fontSize="14px",t.style.color="#ffffff",n.appendChild(t);var r=document.createElement("div");t.appendChild(r);var i=document.createElement("span");i.innerHTML=o.t("pgEnterPINPrompt",s),i.style.fontSize="14px",i.style.color="#ffffff",r.appendChild(i);var u=j(n);u.setAttribute("aria-label",o.t("pgAriaPINEntryDescription",s)+"."+o.t("pgEnterPINPrompt",s)),k(u,!0);var a=q(n,o.t("pgManageYourPIN",s));k(a),a.onclick=function(){return f};var f=!1;setTimeout(function(){f=!0},500);var c=function(){f&&(e.verifyPIN(u.value)?(l&&x("pgUnlocked","true"),e.setLocked(!1),e.close(!0)):(u.value="",O(i,o.t("pgIncorrectPIN",s),!1),u.focus()))};F(u,c);var h=l?"pgUnlock":e._intent==="download"?"pgDownload":"toolTipPlay";P(e,{id:"pgTurnOff",text:o.t(h,s),clickFunction:c})}function U(e){C(n),L();var t=document.createElement("div");t.id="enterPIN",t.style.marginTop="16px",t.style.width="100%",t.style.height="40px",t.style.position="relative",t.style.fontSize="14px",t.style.color="#ffffff",n.appendChild(t);var r=document.createElement("span");r.innerHTML=o.t("pgPasswordPrompt",s),r.style.fontSize="14px",r.style.color="#ffffff",r.style.position="absolute",t.appendChild(r);var i=j(n);pinEntry.pattern=undefined,i.setAttribute("maxlength",undefined),i.setAttribute("aria-label","Password entry text field. Please enter your parental guidance password."),k(i,!0);var u=q(n,o.t("pgForgottenPassword",s));k(u);var a=function(){z(e,i.value),i.value=""};F(i,a),P(e,{id:"pgPasswordContinue",text:"Continue",clickFunction:a})}function z(e,t,r){var i="password="+t,u="POST",a={ok:function(){r?r(!0):J(e)},notok:function(){r?r(!1):O(n,o.t("pgPasswordError",s),!0)}},f="/mediaselector/4/pg/verify";N(f,i,u,a)}function V(){W++,clearTimeout(X),X=setTimeout($,100)}function $(){e&&(e.style.left="-500px",e.style.top="-500px",e.style.height="5000px",e.style.width="5000px");if(t){var n=Math.floor(window.innerWidth/2-t.offsetWidth/2);if(n<0||W>0)n=0;t.style.left=n+"px";var r=window.innerHeight-t.offsetHeight;if(window.innerHeight>=t.offsetHeight){var i=Math.floor(r/2);if(W>0||i<5)i=5}else i=2;t.style.marginTop="0px",t.style.marginLeft="0px",t.style.top=i+"px"}}function J(e){C(n),L();var t=document.createElement("div");t.id="guidanceMessage",t.style.width="100%",t.style.height="64px",t.style.position="relative",t.style.fontSize="13px",t.style.color="#868686",n.appendChild(t);var r=document.createElement("span");r.id="guidanceMessage",r.innerHTML=o.t("pgGuidanceUpdateInfo",s),r.style.position="absolute",r.style.left="0px",r.style.top="16px",t.appendChild(r);var i=document.createElement("div");i.style.marginTop="32px",i.style.width="100%",i.style.height="20px",i.style.position="relative",i.style.fontSize="14px",i.style.color="#ffffff",n.appendChild(i);var u=document.createElement("span");u.innerHTML=o.t("pgEnterPIN",s),u.style.top="-15px",u.style.fontSize="14px",u.style.color="#ffffff",u.style.position="absolute",i.appendChild(u);var a=j(n);a.setAttribute("aria-label",o.t("pgAriaPINEntryDescription",s)+"."+o.t("pgAriaPINPrompt",s)),k(a,!0);var f=function(){g(a.value)?(e.setPIN(a.value),e.setLocked(!1),e.close()):(a.value="",O(i,o.t("pgPINValidationError",s),!1),a.focus())};F(a,f),P(e,{id:"pgNewPinActivate",text:"Activate",clickFunction:f})}function G(e){return nt(et(rt(e)))}function Y(e,t){return nt(tt(rt(e),rt(t)))}function Z(){return G("abc").toLowerCase()=="a9993e364706816aba3e25717850c26c9cd0d89d"}function et(e){return st(ot(it(e),e.length*8))}function tt(e,t){var n=it(e);n.length>16&&(n=ot(n,e.length*8));var r=Array(16),i=Array(16);for(var s=0;s<16;s++)r[s]=n[s]^909522486,i[s]=n[s]^1549556828;var o=ot(r.concat(it(t)),512+t.length*8);return st(ot(i.concat(o),672))}function nt(e){try{K}catch(t){K=0}var n=K?"0123456789ABCDEF":"0123456789abcdef",r="",i;for(var s=0;s<e.length;s++)i=e.charCodeAt(s),r+=n.charAt(i>>>4&15)+n.charAt(i&15);return r}function rt(e){var t="",n=-1,r,i;while(++n<e.length)r=e.charCodeAt(n),i=n+1<e.length?e.charCodeAt(n+1):0,55296<=r&&r<=56319&&56320<=i&&i<=57343&&(r=65536+((r&1023)<<10)+(i&1023),n++),r<=127?t+=String.fromCharCode(r):r<=2047?t+=String.fromCharCode(192|r>>>6&31,128|r&63):r<=65535?t+=String.fromCharCode(224|r>>>12&15,128|r>>>6&63,128|r&63):r<=2097151&&(t+=String.fromCharCode(240|r>>>18&7,128|r>>>12&63,128|r>>>6&63,128|r&63));return t}function it(e){var t=Array(e.length>>2);for(var n=0;n<t.length;n++)t[n]=0;for(var n=0;n<e.length*8;n+=8)t[n>>5]|=(e.charCodeAt(n/8)&255)<<24-n%32;return t}function st(e){var t="";for(var n=0;n<e.length*32;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}function ot(e,t){e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;var n=Array(80),r=1732584193,i=-271733879,s=-1732584194,o=271733878,u=-1009589776;for(var a=0;a<e.length;a+=16){var f=r,l=i,c=s,h=o,p=u;for(var d=0;d<80;d++){d<16?n[d]=e[a+d]:n[d]=lt(n[d-3]^n[d-8]^n[d-14]^n[d-16],1);var v=ft(ft(lt(r,5),ut(d,i,s,o)),ft(ft(u,n[d]),at(d)));u=o,o=s,s=lt(i,30),i=r,r=v}r=ft(r,f),i=ft(i,l),s=ft(s,c),o=ft(o,h),u=ft(u,p)}return Array(r,i,s,o,u)}function ut(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function at(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function ft(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}function lt(e,t){return e<<t|e>>>32-t}var e,t,n,r,i,s="en",o,u,a,f,l,c=!1,h,p,d,v={userAction:function(){}},w="#f54897",T=function(){var e={open:function(){},readyState:4,status:500};return e.send=function(){e.onreadystatechange()},e};window.XMLHttpRequest?T=function(){return new XMLHttpRequest}:T=function(){return new ActiveXObject("MSXML2.XMLHTTP")};var W=0,X;E.prototype={show:function(e,t,n){var r=this;s=n,w=t,b(),e&&(l=e.lockClicked,r._intent=e.intent||"play"),window.embeddedMedia.opened();var i=f&&(!y()||!r._isLocked);if(i&&!l){r.close(!0);return}M(r)&&(c&&!y()?U(r):y()?R(r):l&&i?B(r):H(r,e.guidance),document.body.addEventListener&&document.body.addEventListener("touchmove",m),W=0,window.addEventListener&&(window.addEventListener("resize",$),window.addEventListener("orientationchange",V)))},close:function(n,r){var i=this;document.body.removeEventListener&&document.body.removeEventListener("touchmove",m),window.removeEventListener&&(window.removeEventListener("resize",$),window.removeEventListener("orientationchange",V)),e&&(e.parentNode.removeChild(e),e=undefined),t&&(t.parentNode.removeChild(t),t=undefined);if(!r){window.embeddedMedia.closed();for(var s=0;s<i.closedCallbacks.length;s++)i.closedCallbacks[s](n)}},setPIN:function(e){h=G("smpembed"+e),x("pgPIN",h)},setLocked:function(e,t){t&&(x("pgUnlocked",e?"":"true"),p=!e),this._isLocked=e,this.updateGuidanceState()},verify:function(e,t){if(e.verifyPIN){var n=this.verifyPIN(e.verifyPIN);n&&(this.setLocked(!1),e.lockClicked&&x("pgUnlocked","true")),t(n)}else z(this,e.verifyPassword,t)},verifyPIN:function(e){return G("smpembed"+e)===h},setAgeConfirmation:function(e){f=e,this.storeAgeConfirmation()},storeAgeConfirmation:function(){x("pgAgeConfirm",f),this.setLocked(!0)},updateGuidanceState:function(){var e=this.guidance;e.isGuidanceLocked=this._isLocked&&y()&&!p,e.hasGuidancePassword=c,e.hasGuidancePIN=y(),e.guidanceSkipped=f&&!y(),e.guidancePINPassed=!this._isLocked&&y(),e.canPlay=f&&!this._isLocked;for(var t=0;t<this.updateCallbacks.length;t++)this.updateCallbacks[t](e)},setSonar:function(e){v=e}};var K=0,Q="";return E}),define("mp/classes/sonarreporter",["jquery-1.9"],function(e){function m(e){var t=this;return this._echo=null,this._callBack=e.sonarInitialised,this._settings=e._settings,this._player=e,this._smpHtml5,this._smpHtml5PlayerVersion="undefined",this._duration=0,this._isLive=!1,this._playHeadPosition=0,this._smpLabels={},this._currentMedia=null,require(["http://static.bbci.co.uk/nkdata/echoclient/0.8.0/sharedmodules/echo.js"],function(){require(["echo"],function(n){n&&(t._echo=n,c=n.Media,h=n.EchoClient,p=n.Enums,d=n.ConfigKeys,v=n.Environment,c&&h&&p&&d&&v&&t.initComplete(e))})}),t}function g(e,t){e._currentMedia&&(e._currentMedia=null),e._isLive=t.live||t.simulcast;var n=p?p.AvType.VIDEO:"video";t.type==="audio"&&(n=p?p.AvType.AUDIO:"audio"),e._smpLabels[l]=t.itemGroup;var r=e._settings.statsObject.parentPID?e._settings.statsObject.parentPID:"unknown";e._currentMedia=new c(r,n,!e._isLive,p.RetrievalType.STREAM,!0),e._isLive&&e._currentMedia.setLength(0);var i=t.connections[0],s=i.supplier?i.supplier:"undefined";e._currentMedia.setCDN(s);var o=i.encoding?i.encoding:"undefined";e._currentMedia.setCodec(o),e._sonarEcho.setMedia(e._currentMedia)}var t="http://sa.bbc.co.uk/bbc/nkdata/s",n="@sonar.rum.url@",r="bbc_smp_bd",i="bbc_smp_lr",s="bbc_smp_lo",o="bbc_smp_lp",u="bbc_smp_lt",a="bbc_smp_bv",f="connection_type",l="version_id",c,h,p,d,v;return m.prototype={initComplete:function(e){var r=this,i=r._settings.statsObject,s={};s[d.COMSCORE.URL]=t;if(t.indexOf("echochamber")){var o=i.trace||"EMP_TESTING-"+Math.random();s[d.ECHO.TRACE]=o;try{console.log("Trace: "+s[d.ECHO.TRACE])}catch(u){}}n.indexOf("sonar.rum.url")===-1;var f=r._settings.appName&&r._settings.appName!==""?r._settings.appName:"smphtml5",l=r._settings.appType&&r._settings.appType!==""?r._settings.appType:p.ApplicationType.WEB;r._sonarEcho=new h(f,l,"3feekcw32vtrcrj6mz7jrh5x",s),delete r._sonarEcho.consumers[h.Consumers.RUM],r.initSMPLabels(),r._sonarEcho.setPlayerName("smphtml5"),window.embeddedMedia.version&&(r._smpLabels[a]=window.embeddedMedia.version),r._sonarEcho.setPlayerVersion(r._smpHtml5PlayerVersion),r._sonarEcho.optOutOfCookies(),r._sonarEcho.viewEvent(e._settings.counterName,r._smpLabels),r._callBack(e)},playResume:function(e){var t=this;t._isLive?t._playHeadPosition=0:t._playHeadPosition=Math.round(e),t._sonarEcho.avPlayEvent(t._playHeadPosition*1e3,t._smpLabels)},stop:function(e){var t=this;t._isLive?t._playHeadPosition=0:t._playHeadPosition=Math.round(e),t._sonarEcho.avStopEvent(t._playHeadPosition*1e3,t._smpLabels)},pause:function(e){var t=this;t._isLive?t._playHeadPosition=0:t._playHeadPosition=Math.round(e),t._sonarEcho.avPauseEvent(t._playHeadPosition*1e3,t._smpLabels)},end:function(e){var t=this;t._isLive?t._playHeadPosition=0:t._playHeadPosition=Math.round(e),t._sonarEcho.avEndEvent(t._playHeadPosition*1e3,t._smpLabels)},seek:function(e){var t=this;t._isLive?t._playHeadPosition=0:t._playHeadPosition=Math.round(e),t._sonarEcho.avSeekEvent(t._playHeadPosition*1e3,t._smpLabels)},buffering:function(e){var t=this;t._isLive?t._playHeadPosition=0:t._playHeadPosition=Math.round(e),t._sonarEcho.avBufferEvent(t._playHeadPosition*1e3,t._smpLabels)},userAction:function(e,t,n){var r=this;r._sonarEcho&&r._sonarEcho.userActionEvent(e,t,n)},initPlayer:function(t){var n=this;n._smpHtml5=t._settings.container,e(n._smpHtml5).bind("playlistLoaded",{sonarReporter:n},n.eventHandler),e(n._smpHtml5).bind("SonarPlayEvent",{sonarReporter:n},n.eventHandler),e(n._smpHtml5).bind("SonarConnectionEvent",{sonarReporter:n},n.eventHandler),e(n._smpHtml5).bind("SonarPauseEvent",{sonarReporter:n},n.eventHandler),e(n._smpHtml5).bind("SonarResumeEvent",{sonarReporter:n},n.eventHandler),e(n._smpHtml5).bind("SonarSeekEvent",{sonarReporter:n},n.eventHandler),e(n._smpHtml5).bind("SonarEndEvent",{sonarReporter:n},n.eventHandler),e(n._smpHtml5).bind("SonarUserActionEvent",{sonarReporter:n},n.eventHandler),e(n._smpHtml5).bind("SonarPlayerVersionEvent",{sonarReporter:n},n.eventHandler),e(n._smpHtml5).bind("SonarConnectionTypeEvent",{sonarReporter:n},n.eventHandler),e(n._smpHtml5).bind("SonarErrorEvent",{sonarReporter:n},n.eventHandler),e(n._smpHtml5).bind("seeking",{sonarReporter:n},n.eventHandler)},eventHandler:function(e){var t=e.data.sonarReporter;if(!t._sonarEcho)return;switch(e.type){case"playlistLoaded":t._currentMedia!=null&&t.end(t._player.currentTime());break;case"SonarPlayEvent":g(t,e.mediaItem),t.updateSMPLabels(e.mediaItem);var n=t._player.currentTime();n>0?t.playResume(n):t.playResume(0),!t._isLive&&t._player.duration()>0&&t._duration<1&&(t._duration=t._player.duration(),t._sonarEcho.setMediaLength(t._duration));break;case"SonarPauseEvent":t.pause(t._player.currentTime());break;case"SonarEndEvent":t.end(t._player.currentTime());break;case"SonarSeekEvent":t._player.paused()||t.playResume(t._player.currentTime());break;case"SonarResumeEvent":t.playResume(t._player.currentTime());break;case"SonarUserActionEvent":t.userAction(e.actionType,e.controlId,t._smpLabels),t.checkSubtitles(e.controlId);break;case"SonarPlayerVersionEvent":t._smpHtml5PlayerVersion!==e.properties.version&&(t._smpHtml5PlayerVersion=e.properties.version,t._sonarEcho.setPlayerVersion(t._smpHtml5PlayerVersion));break;case"SonarConnectionTypeEvent":e.properties.connectionType&&t._smpLabels[f]!==e.properties.connectionType&&(t._smpLabels[f]=e.properties.connectionType);break;case"SonarErrorEvent":break;case"seeking":t.seek(t._player.currentTime())}},checkSubtitles:function(e){var t=this;e=="subtitles_on"?t._sonarEcho.setPlayerIsSubtitled(!0):e=="subtitles_off"&&t._sonarEcho.setPlayerIsSubtitled(!1)},volume:function(e){var t=this;e&&t._sonarEcho.setPlayerVolume(e)},initSMPLabels:function(){var e=this;e._smpLabels[o]="0",e._smpLabels[f]="undefined",e._smpLabels[i]="undefined",e._smpLabels[a]="undefined",e._smpLabels[l]="unknown"},updateSMPLabels:function(e){var t=this;e.rewindWindow>0&&t._isLive?(t._smpLabels[i]="1",e.itemGroup&&(t._smpLabels[o]=e.itemGroup)):t._smpLabels[i]="0"},mediaBitrate:function(e){var t=this;e&&t._sonarEcho.setMediaBitrate(e)}},m}),define("mp/classes/player",["jquery-1.9","mp/classes/settings","mp/classes/language","mp/classes/decisionengine","mp/classes/errors/error","mp/modules/device","mp/classes/rdotreporting","mp/classes/daxreporting","mp/classes/parentalguidance","mp/classes/players/player","mp/classes/sonarreporter"],function(e,t,n,r,i,s,o,u,a,f,l){function m(e,t){var n=0;t&&(n=t.offsetWidth),n===0&&(n=800);for(var r=0;r<d.length-1;r++)if(n/d[r]<1.1)break;var i=d[r]+"x"+v[r];return e.replace("{recipe}",i)}function g(e,t,n){function m(){if(v++===0){var e=window.embeddedMedia.warn3G;for(var r=0;r<e.updateCallbacks.length;r++)e.updateCallbacks[r]();e.showing=!1,document.cookie="ckps_3gAccepted=true; path=/",setTimeout(function(){t.show(n)},400),setTimeout(e.kill,250)}event.preventDefault()}function g(){var e=event.keyCode||event.which;e==13&&m()}var r=window.embeddedMedia.warn3G;r.showing&&r.kill(),r.showing=!0;var i=e.container[0];t.hide(!0);var s=e.locale(),o=document.createElement("div");o.id="bmp3gWrn";var u=document.createElement("div");u.id="bmp3gMsg";var a=document.createElement("p");a.id="bmp3gP",a.innerHTML=window.embeddedMedia.language.t("threeG",s,e.custom3GWarning),u.appendChild(a);var f=document.createElement("div");f.className=".continueBtn",f.id="bmp3gWrnBtn";var l=document.createElement("a");l.href="#threeG",l.id="bmp3gWrnA",l.innerHTML=window.embeddedMedia.language.t("threeGcontinue",s),f.appendChild(l),o.appendChild(u),o.appendChild(f);var c=document.createElement("style"),h=document.getElementsByTagName("head")[0];h.appendChild(c);var p=c.sheet?c.sheet:c.styleSheet;p.insertRule("#bmp3gWrn  { position: absolute; left: 50%; top: 50%;margin-top:-80px; width: 256px; height:160px; margin-left: -128px; }",0),p.insertRule("#bmp3gMsg { top: 0; left: 0; background: rgba(0, 0, 0, 0.7); width: 256px; height: 120px; position: absolute; }",1),p.insertRule("#bmp3gP { padding: 17px; font-size: 11px; font-weight: bold; color:white; line-height:16px; text-align: left; margin: 0; cursor: default; }",2),p.insertRule("#bmp3gWrnBtn { top: 121px; left: 0; width: 256px; background: rgba(0, 0, 0, 0.7); color:white; height: 40px; position: absolute; cursor: pointer; }",3),p.insertRule("#bmp3gWrnA { font-size: 13px; font-weight: bold;text-decoration:none; color:white; text-align:center;position:absolute;left:0;right:0;top:0;bottom:0;padding-top:11px;}",4),p.insertRule("#bmp3gWrnBtn:hover, #bmp3gWrnBtn:focus { background: "+e.ui.colour+"}",5);var d=[],v=0;r.kill=function(){var e=d[0]||o;e.parentNode.removeChild(e),t.show(!1)},f.addEventListener("keyup",g),f.addEventListener("click",m),f.addEventListener("touchend",m),i.offsetWidth<256?(document.body.appendChild(o),o.style.position="fixed"):t.wrapper?t.wrapper.append(o):(d=S(e).append(o),i.appendChild(d[0]))}function y(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*new Date%16|0,n=e=="x"?t:t&3|8;return n.toString(16)}).toUpperCase()}function T(){window.embeddedMedia?(window.embeddedMedia.playerInstances||(window.embeddedMedia.playerInstances={}),window.embeddedMedia.players||(window.embeddedMedia.players=[])):window.embeddedMedia={players:[],playerInstances:{}};var e=window.embeddedMedia;return e.openCallbacks||(e.openCallbacks=[],e.closedCallbacks=[],e.opened=function(){for(var t=0;t<e.openCallbacks.length;t++)e.openCallbacks[t]()},e.closed=function(){for(var t=0;t<e.closedCallbacks.length;t++)e.closedCallbacks[t]()}),e.addPlayer||(e.addPlayer=function(t,n){e.playerInstances[t]=n,e.players.push(n)}),e.language||(e.language=n),e.demi||(e.demi={loading:!0,loadingNetwork:!0,loadingScript:!0,isTabletDevice:!1,isMobileDevice:!1,hasTouchScreen:!1,hasStylus:!1,callbacks:[]}),e}function L(e){var t=window.embeddedMedia.demi;if(e&&(t.loadingNetwork||t.loadingScript))return;t.loading=!1;for(var n=0;n<t.callbacks.length;n++)t.callbacks[n]()}function A(e){var t=location.protocol=="https:"?"https":"http",n=t+"://"+(e&&e.mediator&&e.mediator.host?e.mediator.host:"open.live.bbc.co.uk")+"/wurfldemi/";C=setTimeout(L,N),O(n+"network.jsonp?callback=bumpDemiNetwork"),O(n+"useragent.jsonp?callback=bumpDemiScript&ua="+encodeURIComponent(window.navigator.userAgent))}function O(e){var t=document.createElement("script");t.type="text/javascript",t.charset="utf-8",t.async=!0,t.src=e,document.getElementsByTagName("head")[0].appendChild(t)}var c=new RegExp("^([0-9\\.]+)%$","gi"),h=new RegExp("^([0-9\\.]+)px$","gi"),p=16/9,d=[640,800,1024,1376,1920],v=[360,450,576,774,1080],b=function(e,t){var n;return typeof e=="number"&&(e=String(e)),typeof e=="string"&&e.length>0&&(e.match(h)?n=t?e:e.replace("px",""):e.match(c)?n=e:isNaN(Number(e))||(n=String(Number(e))+(t?"px":""))),n},w=function(e,t,n){t=t&&t==="width"?"width":"height";var r,i=e._settings,s=i.container,o=t==="width"?"height":"width",u=b(e["_"+o]||i.plugins.player[o]);return u!==undefined&&(u.match(c)?r=u:isNaN(u)?r=String(s[t]()):r=String(o==="height"?Math.ceil(u*p):Math.ceil(u/p))),r+(n?"px":"")},E=function(e,t,n,r,i){n=n&&n==="width"?"width":"height";if(typeof t!="undefined"){t+="";var s=n==="width"?"height":"width",o=e._settings,u=o.container,a=t,f=a.match(h),l=b(a);l!==undefined?(e["_"+n]=a,o.plugins.player[n]=l):(l=w(e,n),l!==undefined&&(e["_"+n]="0",o.plugins.player[n]=l));if(l!==undefined){r=r||a.match(c)!==null?!0:!1,r||u.css(n,l+"px");if(!i&&e["_"+s]===undefined){var p=w(e,s,f);E(e,p,s,r,!0)}x(e)}}return e["_"+n]},S=function(t){var n={position:"relative","z-index":"1",height:"100%",width:"100%","padding-bottom":0};return t.superResponsive&&(n["padding-bottom"]="56.25%"),!t.responsive&&!t.superResponsive&&(t.container.css("width",b(t.plugins.player.width+"")+"px"),t.container.css("height",b(t.plugins.player.height+"")+"px")),e("<div />").css(n)},x=function(e){var t=e._settings.container,n=m(e._settings.plugins.player.poster,t);n&&e.player.includePoster?t.css({"background-image":"url("+n+")","background-repeat":"no-repeat","background-position":"center center","background-size":"contain"}):t.css("background-image","")},N=1e4,C,k;window.bumpDemiNetwork=function(e){clearTimeout(C);var t=T().demi;t.isMobileNetwork=e&&e.is_mobile_network,t.loadingNetwork=!1,L(!0)},window.bumpDemiScript=function(e){clearTimeout(k);var t=T().demi;e&&(t.isTabletDevice=e.type==="tablet",t.isMobileDevice=e.type==="mobile",t.hasTouchScreen=e.navigation==="touchScreen",t.hasStylus=e.navigation==="stylus"),t.loadingScript=!1,L(!0)};var M=function(n,i){var s=T();s.version=this.bumpVersion="3.4.4",s.demiKickedOff||(s.demiKickedOff=!0,A(i)),this.bumpRevision="1451856",this.player=new f,this.player.fake=!0,this.supportsMarkers=!1,i.container=n,i.domid=n.attr("id");var c=this._settings=new t(i);if(!c.daxSessionID||c.daxSessionID==="")c.daxSessionID=y();o.init(c.enableRdotReporting&&location.protocol!="https:",c.daxSessionID,c.customRdotBaseURL),u.init(c.enableDaxReporting,c.counterName,c.daxSessionID,c.customDAXURL,c.appName,c.appType),s.parentalGuidance||(s.parentalGuidance=new a(u)),c.guidance=s.parentalGuidance.guidance,s.warn3G||(s.warn3G={updateCallbacks:[],show:g});var h=s.parentalGuidance;return h.closedCallbacks.push(function(){var t=e.Event("guidanceClosed");t.guidance=c.guidance,c.container.trigger(t)}),h.updateCallbacks.push(function(t){var n=e.Event("guidanceUpdated");t.noPin=c.guidanceCleared,c.guidance=t,n.guidance=c.guidance,c.container.trigger(n)}),this._decisionEngine=new r(c),c.enableSonarReporting&&location.protocol!="https:"&&(this._sonarReporter=new l(this,h)),this};return M.prototype={showGuidance:function(e,t,n,r){var i={lockClicked:n};i.title=e?e:"",i.guidance=t?t:"",i.intent=r?r:"play";var s=window.embeddedMedia.parentalGuidance,o=this._settings;o.guidanceCleared||s.show(i,o.ui.colour,o.locale())},lockGuidance:function(){this._settings.guidance.hasGuidancePIN===!0?window.embeddedMedia.parentalGuidance.setLocked(!0,!0):this.unlockGuidance()},unlockGuidance:function(){this.showGuidance("","",!0)},name:function(){return this._decisionEngine.name},decide:function(){return this._decisionEngine.decide(),this._settings.enableSonarReporting&&location.protocol!="https:"&&this._decisionEngine.name==="smphtml5"&&this._sonarReporter&&this._sonarReporter.initPlayer(this),this.name()},settings:function(){return this._settings.set.apply(this._settings,e.makeArray(arguments))},deviceData:function(){return this._decisionEngine.deviceData()},poster:function(e){return typeof e=="string"&&(this._settings.set({plugins:{player:{poster:e}}}),x(this)),this._settings.plugins.player.poster},play:function(){this.player.play()},autoplay:function(e){return typeof e=="boolean"&&(this._settings.autoplay=e),this._settings.autoplay},pause:function(){this.player.pause()},suspend:function(){this.player.pause()},currentTime:function(e){return this.player.currentTime(e)},duration:function(){return this.player.duration()},muted:function(e){return this.player.muted(e)},loadPlaylist:function(e,t,n,r){var i=this,s=i.player,o=i._settings;o.playlist="",o.playlistXML=null,o.playlistObject=null,typeof e!="string"?(o.playlistObject=e,e.holdingImageURL&&(o.overrideHoldingImage=e.holdingImageURL)):e.indexOf("<")===0?o.playlistXML=e:o.playlist=e,typeof t=="object"?(i.autoplay(t.autoplay),o.overrideHoldingImage=t.overrideHoldingImage||o.overrideHoldingImage,o.startTime=t.startTime,o.sessionID=t.sessionID,o.statsObject.parentPID=t.parentPID,o.statsObject.parentPIDType=t.parentPIDType,typeof t.promptGuidanceWhenAutoplay=="boolean"&&(o.promptGuidanceWhenAutoplay=t.promptGuidanceWhenAutoplay),t.webcastData&&(o.webcastData=t.webcastData)):(i.autoplay(t),o.startTime=0,o.overrideHoldingImage=n||o.overrideHoldingImage),s._settings=o;if(s.includePoster){var u=function(){i.poster(o.overrideHoldingImage)};o.autoplay?setTimeout(u,100):u()}r&&(r.startTime&&(o.startTime=r.startTime),typeof r.promptGuidanceWhenAutoplay=="boolean"&&(o.promptGuidanceWhenAutoplay=r.promptGuidanceWhenAutoplay)),s.loadPlaylist()},kind:function(){return this.player.kind()},stop:function(){return this.player.stop()},loadPlugin:function(e,t){this.player.loadPlugin?this.player.loadPlugin(e,t):e&&(e.data=t,this._settings.plugins.toLoad.push(e))},updateUiConfig:function(t){e.extend(this._settings.ui,t),this.player.updateUiConfig(t)},setData:function(e){this.player.setData(e)},setPoster:function(e){this.player.setPoster(e,this)},dispatchEvent:function(e,t){this.player.dispatchEvent(e,t)},pauseAt:function(e){this.player.pauseAt(e)},webcastData:function(e){this._settings.webcastData=e,this.player.webcastData(e)},volume:function(e){var t=this.player.volume(e);return e&&t&&this._sonarReporter&&this._sonarReporter.volume(t),t},paused:function(){return this.player.paused()},ended:function(){return this.player.ended()},seeking:function(){return this.player.seeking()},width:function(e){return E(this,e,"width")},height:function(e){return E(this,e,"height")},bind:function(){var t=this._settings.container;return t.bind.apply(t,e.makeArray(arguments)),this},unbind:function(){var t=this._settings.container;return t.unbind.apply(t,e.makeArray(arguments)),this},_loadOptions:function(t){var n=this,a=n.player,f,l=n._settings;typeof t=="string"?f=l.playlist=t:typeof t=="object"&&(l.set(t),f=t.playlist);if(!a.fake){a.loadPlaylist(f,l.autoplay,l.overrideHoldingImage);return}n._decisionEngine=new r(l);if(!l.validate())return;n.decide();var c=n._decisionEngine.name;f&&o.updatePlaylistURL(f);if(!c){var h=e.Event("error");x(n),h.errorData=new i(!s.get().supportsFlash||l.showUnsupportedMessage?6003:6010,l),l.ui.hideDefaultErrors||this.showErrorDialog(h.errorData),l.container.trigger(h),o.trackError(h.errorData.code())}else{var p=function(e,t){window.embeddedMedia.addPlayer(l.domid,e),n.player=e,e.dax=u,n.supportsMarkers=!!t,x(n)};n.addInitialisationListener(),n._decisionEngine.embed(p),!l.responsive&&!l.superResponsive&&(l.container.css("width",b(l.plugins.player.width+"")+"px"),l.container.css("height",b(l.plugins.player.height+"")+"px"))}return this},load:function(t){var n=this,r=function(){return window.embeddedMedia.language.load(n._settings.locale(),function(){n._loadOptions(t)}),n},i=function(){return window.embeddedMedia.demi.loading?window.embeddedMedia.demi.callbacks.push(r):r(),n};if(s.get().waitForLoad)return document.readyState==="complete"||document.readyState==="interactive"?i():(e(document).ready(i),n);return window.embeddedMedia.demi.loading?(window.embeddedMedia.demi.callbacks.push(r),n):r()},reset:function(){return this},addInitialisationListener:function(){var t=this,n=setTimeout(function(){var n=e.Event("error");n.errorData=new i(6004,t._settings),t._settings.container&&t._settings.container.trigger(n)},t._Timeout||15e3);this._settings.container.bind("initialised",function(){clearTimeout(n)})},showErrorDialog:function(e){var t=this._settings,n=t.container;n.empty();var r=document.createElement("div");r.style.position="absolute",r.style.top=r.style.left=r.style.bottom=r.style.right="0px";var i=document.createElement("div"),s=i.style;s.position="absolute",s.top=s.left="50%",s.width="320px",s.marginLeft="-160px",s.marginTop="-80px",s.height="160px",s.verticalAlign="middle",s.textAlign="center",s.color="white",s.backgroundColor="#252525",s.fontSize="18px";var o=document.createElement("div"),u=o.style;u.position="absolute",u.display="block",u.top=u.left=u.right="20px",o.innerHTML=e.description();if(e.code()==6010){var a=document.createElement("div"),f=a.style;f.position="absolute",f.bottom="20px",f.left="10px",f.right="10px";var l=window.embeddedMedia.language.t("downloadFlash",t.locale(),t.overrideErrorLink.linkTitle),c=t.overrideErrorLink.link||"http://get.adobe.com/flashplayer";a.innerHTML='<a href="'+c+'" target="_blank" style="color:white;display:inline-block;font-size: 14px;background-color : black;text-decoration: none;padding:10px;">'+l+"</a>",i.appendChild(a)}i.appendChild(o),n.append(S(t).append(i))},sonarInitialised:function(e){e._settings.enableSonarReporting&&window.embeddedMedia.parentalGuidance.setSonar(e._sonarReporter)}},M}),define("bump-3",["jquery-1.9","mp/classes/player"],function(e,t){var n={};if(typeof e.fn.player!="function"){var r={getPlayer:function(){var t=e(e(this).get(0)),r=t.attr("id");return n[r]},player:function(r){var i=e(e(this).get(0)),s=i.attr("id");if(typeof n[s]=="undefined"||n[s].settings().container[0]!=i[0]){if(!s){var o="bbcMediaPlayer",u=0;do s=o+u++;while(document.getElementById(s));i.attr("id",s)}n[s]=new t(i,r)}else n[s].settings(r);return n[s]}};e.fn.extend(r)}if(typeof e.players!="function"){var i={players:function(){return n}};e.extend(i)}return e})